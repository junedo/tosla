window.$P=function(){};optimizelyCode=function(data){var blankExperimentData={log_host:"log.optimizely.com",www_host:"www.optimizely.com"};var DATA=data||blankExperimentData;var integrator={};var optly={nativity:{},domain:{},Cleanse:{},taint:{},match:{}};var distributor={};var query={};var redirect={};var detect={};var directive={};var json={};var tracker={};var template={};var preview={};var ajax={};var cookie={};var user={};var iapi={};var evaluator={};var data={};var condition={};var main={};var segmenter={};var timer={};var api={};var common={};var plan={};optly.nativity.getNativeGetElementsByClassName=function(){var nativeGetByClass=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(nativeGetByClass)){var optimizely=window.optimizely||{};var optimizelyGetByClass=optimizely.getElementsByClassName;var optly_=window.optly||{};var optlyGetByClass=optly_.getElementsByClassName;if(optly.nativity.isNativeFunction(optimizelyGetByClass)){nativeGetByClass=optimizelyGetByClass}else{if(optly.nativity.isNativeFunction(optlyGetByClass)){nativeGetByClass=optlyGetByClass}else{nativeGetByClass=null}}}return nativeGetByClass};optly.nativity.isNativeFunction=function(function_){return function_&&String(function_).indexOf("[native code]")!==-1};optly.Cleanse.each=function(object,function_,context){var hasLookupGetter=!!Object.prototype.__lookupGetter__;var hasLookupSetter=!!Object.prototype.__lookupSetter__;for(var key in object){if(object.hasOwnProperty(key)){var getter=hasLookupGetter?object.__lookupGetter__(key):null;var setter=hasLookupSetter?object.__lookupSetter__(key):null;try{var value=!getter?object[key]:null;function_.call(context,key,value,getter,setter)}catch(err){}}}};optly.Cleanse.finish=function(){if(optly.Cleanse.running){optly.Cleanse.running=false;optly.Cleanse.each(optly.Cleanse.types,function(typeName,type){if(Object.prototype.__defineGetter__){var getters=optly.Cleanse.getters[typeName];optly.Cleanse.each(getters,function(propertyName,getter){type.prototype.__defineGetter__(propertyName,getter);optly.Cleanse.log("restored getter",typeName,propertyName)})}if(Object.prototype.__defineSetter__){var setters=optly.Cleanse.setters[typeName];optly.Cleanse.each(setters,function(propertyName,setter){type.prototype.__defineSetter__(propertyName,setter);optly.Cleanse.log("restored setter",typeName,propertyName)})}var properties=optly.Cleanse.properties[typeName];optly.Cleanse.each(properties,function(propertyName,property){type.prototype[propertyName]=property;optly.Cleanse.log("restored property",typeName,propertyName)})});optly.Cleanse.unfixGetElementsByClassName();optly.Cleanse.log("finish");var console=window.console;var param="optimizely_log=true";var log=window.location.hash.indexOf(param)!==-1||window.location.search.indexOf(param)!==-1;if(log&&console&&console.log){var logs=optly.Cleanse.logs;for(var i=0;i<logs.length;i++){console.log(logs[i])}}}};optly.Cleanse.log=function(action,typeName,propertyName){if(typeName){typeName=typeName.replace(/_/g,"");optly.Cleanse.logs.push("Optimizely / Info / Cleanse / "+action+": "+typeName+"."+propertyName)}else{optly.Cleanse.logs.push("Optimizely / Info / Cleanse / "+action)}};optly.Cleanse.start=function(){var hostname=window.location.hostname;if(hostname.indexOf("optimizely")!==-1&&hostname.indexOf("edit")===-1&&hostname.indexOf("preview")===-1&&hostname.indexOf("test")===-1){return}if(optly.Cleanse.running){optly.Cleanse.log("already running so didn't start");return}optly.Cleanse.log("start");optly.Cleanse.running=true;for(var type in optly.Cleanse.types){if(!optly.Cleanse.types[type]){delete optly.Cleanse.types[type]}}optly.Cleanse.each(optly.Cleanse.types,function(typeName,type){optly.Cleanse.getters[typeName]={};optly.Cleanse.properties[typeName]={};optly.Cleanse.setters[typeName]={};optly.Cleanse.each(type.prototype,function(propertyName,property,getter,setter){if(optly.nativity.isNativeFunction(property)||optly.nativity.isNativeFunction(getter)||optly.nativity.isNativeFunction(setter)){optly.Cleanse.log("ignore native code",typeName,propertyName);return}if(getter){optly.Cleanse.getters[typeName][propertyName]=getter;optly.Cleanse.log("cleansed getter",typeName,propertyName)}else{optly.Cleanse.properties[typeName][propertyName]=property;optly.Cleanse.log("cleansed property",typeName,propertyName)}if(setter){optly.Cleanse.setters[typeName][propertyName]=setter;optly.Cleanse.log("cleansed setter",typeName,propertyName)}delete type.prototype[propertyName]})});optly.Cleanse.fixGetElementsByClassName();optly.Cleanse.hasRunStart=true};optly.Cleanse.fixGetElementsByClassName=function(){if(!optly.nativity.isNativeFunction(document.getElementsByClassName)){var nativeGetElementsByClassName=optly.nativity.getNativeGetElementsByClassName();if(nativeGetElementsByClassName){optly.Cleanse.getElementsByClassName=document.getElementsByClassName;document.getElementsByClassName=nativeGetElementsByClassName}else{optly.Cleanse.log("Error: native HTMLElement.prototype.getElementsByClassName missing")}}};optly.Cleanse.unfixGetElementsByClassName=function(){if(optly.Cleanse.getElementsByClassName){document.getElementsByClassName=optly.Cleanse.getElementsByClassName;optly.Cleanse.getElementsByClassName=null}};optly.Cleanse.getElementsByClassName=null;optly.Cleanse.getters={};optly.Cleanse.logs=[];optly.Cleanse.properties={};optly.Cleanse.setters={};optly.Cleanse.types={HTMLElement_:window.HTMLElement,Object_:Object};window.optly=window.optly||{};window.optly.Cleanse={finish:optly.Cleanse.finish,logs:optly.Cleanse.logs,start:optly.Cleanse.start};optly.domain.check=function(url){var location=optly.domain.getLocation(url);for(var i=0,nRules=optly.domain.PATH_BLACK_LIST.length;i<nRules;i++){var pattern=optly.domain.PATH_BLACK_LIST[i];if(pattern.test(location.pathname)){return false}}for(i=0,nRules=optly.domain.HOST_BLACK_LIST.length;i<nRules;i++){pattern=optly.domain.HOST_BLACK_LIST[i];if(pattern.test(location.hostname)){return false}}var whiteList=new RegExp(optly.domain.WHITE_LIST);return whiteList.test(location.hostname)};optly.domain.getLocation=function(url){var anchor=document.createElement("a");anchor.href=url;return anchor};optly.domain.HOST_BLACK_LIST=[/(edit|preview)(-local)?(-hrd)?\.optimizely\.(com|test)/,/optimizelyedit(-hrd)?\.appspot\.com/,/cdn[^\.]*\.optimizely\.com/];optly.domain.PATH_BLACK_LIST=[/^\/api\/client/];optly.domain.WHITE_LIST="(www-devel.optimizely.com$)|(www-devel.optimizely.appspot.com$)|(www-devel-dot-optimizely.appspot.com$)|(.optimizely.com$)|(.optimizely.at$)|(.optimizely.be$)|(.optimizely.bg$)|(.optimizely.by$)|(.optimizely.ch$)|(.optimizely.cl$)|(.optimizely.co.il$)|(.optimizely.co.nz$)|(.optimizely.co.uk$)|(.optimizely.com.br$)|(.optimizely.com.hr$)|(.optimizely.com.mx$)|(.optimizely.cz$)|(.optimizely.de$)|(.optimizely.es$)|(.optimizely.dk$)|(.optimizely.fr$)|(.optimizely.gr$)|(.optimizely.hk$)|(.optimizely.ie$)|(.optimizely.it$)|(.optimizely.jp$)|(.optimizely.lt$)|(.optimizely.lu$)|(.optimizely.lv$)|(.optimizely.nl$)|(.optimizely.mx$)|(.optimizely.pl$)|(.optimizely.pt$)|(.optimizely.ro$)|(.optimizely.ru$)|(.optimizely.se$)|(.optimizely.sg$)|(.optimisely.com$)|(.optimisely.at$)|(.optimisely.be$)|(.optimisely.bg$)|(.optimisely.by$)|(.optimisely.ch$)|(.optimisely.cl$)|(.optimisely.co.il$)|(.optimisely.co.nz$)|(.optimisely.co.uk$)|(.optimisely.com.br$)|(.optimisely.com.hr$)|(.optimisely.com.mx$)|(.optimisely.cz$)|(.optimisely.de$)|(.optimisely.es$)|(.optimisely.dk$)|(.optimisely.fr$)|(.optimisely.gr$)|(.optimisely.hk$)|(.optimisely.ie$)|(.optimisely.it$)|(.optimisely.jp$)|(.optimisely.lt$)|(.optimisely.lu$)|(.optimisely.lv$)|(.optimisely.nl$)|(.optimisely.mx$)|(.optimisely.pl$)|(.optimisely.pt$)|(.optimisely.ro$)|(.optimisely.ru$)|(.optimisely.se$)|(.optimisely.sg$)|(.optimizely.test$)|(.optimizely.appspot.com$)|(.optimizely-hrd.appspot.com$)|(-dot-optimizely.appspot.com$)|(-dot-optimizely-hrd.appspot.com$)";optly.Cleanse.start();
/*!
 * jQuery JavaScript Library v1.6.4
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * 
 */
var $=(function(window,undefined){var document=window.document,navigator=window.navigator,location=window.location;var jQuery=(function(){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rdigit=/\d/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/ig,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this}if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}if(selector==="body"&&!context&&document.body){this.context=document;this[0]=document.body;this.selector=selector;this.length=1;return this}if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null]}else{match=quickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true)}else{selector=[doc.createElement(ret[1])]}}else{ret=jQuery.buildFragment([match[1]],[doc]);selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes}return jQuery.merge(this,selector)}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector)}this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else{if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}}else{if(jQuery.isFunction(selector)){return rootjQuery.ready(selector)}}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num])},pushStack:function(elems,name,selector){var ret=this.constructor();if(jQuery.isArray(elems)){push.apply(ret,elems)}else{jQuery.merge(ret,elems)}ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector}else{if(name){ret.selector=this.selector+"."+name+"("+selector+")"}}return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){jQuery.bindReady();readyList.done(fn);return this},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else{if(copy!==undefined){target[name]=copy}}}}}return target};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if((wait===true&&!--jQuery.readyWait)||(wait!==true&&!jQuery.isReady)){if(!document.body){return setTimeout(jQuery.ready,1)}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").unbind("ready")}}},bindReady:function(){if(readyList){return}readyList=jQuery._Deferred();if(document.readyState==="complete"){return setTimeout(jQuery.ready,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null}catch(e){}if(document.documentElement.doScroll&&toplevel){doScrollCheck()}}}},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj&&typeof obj==="object"&&"setInterval" in obj},isNaN:function(obj){return obj==null||!rdigit.test(obj)||isNaN(obj)},type:function(obj){return obj==null?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var key;for(key in obj){}return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){for(var name in obj){return false}return true},error:function(msg){throw msg},parseJSON:function(data){if(typeof data!=="string"||!data){return null}data=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))()}jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data)})(data)}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break}}}else{for(;i<length;){if(callback.call(object[i],i,object[i++])===false){break}}}}return object},trim:trim?function(text){return text==null?"":trim.call(text)}:function(text){return text==null?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},makeArray:function(array,results){var ret=results||[];if(array!=null){var type=jQuery.type(array);if(array.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(array)){push.call(ret,array)}else{jQuery.merge(ret,array)}}return ret},inArray:function(elem,array){if(!array){return -1}if(indexOf){return indexOf.call(array,elem)}for(var i=0,length=array.length;i<length;i++){if(array[i]===elem){return i}}return -1},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i])}}return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&((length>0&&elems[0]&&elems[length-1])||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value}}}return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){if(typeof context==="string"){var tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;return proxy},access:function(elems,key,value,exec,fn,pass){var length=elems.length;if(typeof key==="object"){for(var k in key){jQuery.access(elems,k,key[k],exec,fn,value)}return elems}if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass)}return elems}return length?fn(elems[0],key):undefined},now:function(){return(new Date()).getTime()},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context)}return jQuery.fn.init.call(this,selector,context,rootjQuerySub)};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},browser:{}});jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version}if(jQuery.browser.webkit){jQuery.browser.safari=true}if(rnotwhite.test("\xA0")){trimLeft=/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/}rootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready()}}}}function doScrollCheck(){if(jQuery.isReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}jQuery.ready()}return jQuery})();var promiseMethods="done fail isResolved isRejected promise then always pipe".split(" "),sliceDeferred=[].slice;jQuery.extend({_Deferred:function(){var callbacks=[],fired,firing,cancelled,deferred={done:function(){if(!cancelled){var args=arguments,i,length,elem,type,_fired;if(fired){_fired=fired;fired=0}for(i=0,length=args.length;i<length;i++){elem=args[i];type=jQuery.type(elem);if(type==="array"){deferred.done.apply(deferred,elem)}else{if(type==="function"){callbacks.push(elem)}}}if(_fired){deferred.resolveWith(_fired[0],_fired[1])}}return this},resolveWith:function(context,args){if(!cancelled&&!fired&&!firing){args=args||[];firing=1;try{while(callbacks[0]){callbacks.shift().apply(context,args)}}finally{fired=[context,args];firing=0}}return this},resolve:function(){deferred.resolveWith(this,arguments);return this},isResolved:function(){return !!(firing||fired)},cancel:function(){cancelled=1;callbacks=[];return this}};return deferred},Deferred:function(func){var deferred=jQuery._Deferred(),failDeferred=jQuery._Deferred(),promise;jQuery.extend(deferred,{then:function(doneCallbacks,failCallbacks){deferred.done(doneCallbacks).fail(failCallbacks);return this},always:function(){return deferred.done.apply(deferred,arguments).fail.apply(this,arguments)},fail:failDeferred.done,rejectWith:failDeferred.resolveWith,reject:failDeferred.resolve,isRejected:failDeferred.isResolved,pipe:function(fnDone,fnFail){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"]},function(handler,data){var fn=data[0],action=data[1],returned;if(jQuery.isFunction(fn)){deferred[handler](function(){returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().then(newDefer.resolve,newDefer.reject)}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned])}})}else{deferred[handler](newDefer[action])}})}).promise()},promise:function(obj){if(obj==null){if(promise){return promise}promise=obj={}}var i=promiseMethods.length;while(i--){obj[promiseMethods[i]]=deferred[promiseMethods[i]]}return obj}});deferred.done(failDeferred.cancel).fail(deferred.cancel);delete deferred.cancel;if(func){func.call(deferred,deferred)}return deferred},when:function(firstParam){var args=arguments,i=0,length=args.length,count=length,deferred=length<=1&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred();function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;if(!(--count)){deferred.resolveWith(deferred,sliceDeferred.call(args,0))}}}if(length>1){for(;i<length;i++){if(args[i]&&jQuery.isFunction(args[i].promise)){args[i].promise().then(resolveFunc(i),deferred.reject)}else{--count}}if(!count){deferred.resolveWith(deferred,args)}}else{if(deferred!==firstParam){deferred.resolveWith(deferred,length?[firstParam]:[])}}return deferred.promise()}});jQuery.support=(function(){var div=document.createElement("div"),documentElement=document.documentElement,all,a,select,opt,input,marginDiv,support,fragment,body,testElementParent,testElement,testElementStyle,tds,events,eventName,i,isSupported;div.setAttribute("className","t");div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!all.length||!a){return{}}select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];support={leadingWhitespace:(div.firstChild.nodeType===3),tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:(a.getAttribute("href")==="/a"),opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:(input.value==="on"),optSelected:opt.selected,getSetAttribute:div.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=false}if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function(){support.noCloneEvent=false});div.cloneNode(true).fireEvent("onclick")}input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.firstChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="";div.style.width=div.style.paddingLeft="1px";body=document.getElementsByTagName("body")[0];testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){jQuery.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"})}for(i in testElementStyle){testElement.style[i]=testElementStyle[i]}testElement.appendChild(div);testElementParent=body||documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);support.appendChecked=input.checked;support.boxModel=div.offsetWidth===2;if("zoom" in div.style){div.style.display="inline";div.style.zoom=1;support.inlineBlockNeedsLayout=(div.offsetWidth===2);div.style.display="";div.innerHTML="<div style='width:4px;'></div>";support.shrinkWrapBlocks=(div.offsetWidth!==2)}div.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");isSupported=(tds[0].offsetHeight===0);tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);div.innerHTML="";if(document.defaultView&&document.defaultView.getComputedStyle){marginDiv=document.createElement("div");marginDiv.style.width="0";marginDiv.style.marginRight="0";div.appendChild(marginDiv);support.reliableMarginRight=(parseInt((document.defaultView.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)===0}testElement.innerHTML="";testElementParent.removeChild(testElement);if(div.attachEvent){for(i in {submit:1,change:1,focusin:1}){eventName="on"+i;isSupported=(eventName in div);if(!isSupported){div.setAttribute(eventName,"return;");isSupported=(typeof div[eventName]==="function")}support[i+"Bubbles"]=isSupported}}testElement=fragment=select=opt=body=marginDiv=div=input=null;return support})();jQuery.boxModel=jQuery.support.boxModel;var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return !!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return}var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:elem[jQuery.expando]&&jQuery.expando;if((!id||(pvt&&id&&(cache[id]&&!cache[id][internalKey])))&&getByName&&data===undefined){return}if(!id){if(isNode){elem[jQuery.expando]=id=++jQuery.uuid}else{id=jQuery.expando}}if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop}}if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id][internalKey]=jQuery.extend(cache[id][internalKey],name)}else{cache[id]=jQuery.extend(cache[id],name)}}thisCache=cache[id];if(pvt){if(!thisCache[internalKey]){thisCache[internalKey]={}}thisCache=thisCache[internalKey]}if(data!==undefined){thisCache[jQuery.camelCase(name)]=data}if(name==="events"&&!thisCache[name]){return thisCache[internalKey]&&thisCache[internalKey].events}if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)]}}else{ret=thisCache}return ret},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return}var thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id]){return}if(name){thisCache=pvt?cache[id][internalKey]:cache[id];if(thisCache){if(!thisCache[name]){name=jQuery.camelCase(name)}delete thisCache[name];if(!isEmptyDataObject(thisCache)){return}}}if(pvt){delete cache[id][internalKey];if(!isEmptyDataObject(cache[id])){return}}var internalCache=cache[id][internalKey];if(jQuery.support.deleteExpando||!cache.setInterval){delete cache[id]}else{cache[id]=null}if(internalCache){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop}cache[id][internalKey]=internalCache}else{if(isNode){if(jQuery.support.deleteExpando){delete elem[jQuery.expando]}else{if(elem.removeAttribute){elem.removeAttribute(jQuery.expando)}else{elem[jQuery.expando]=null}}}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true)},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match){return !(match===true||elem.getAttribute("classid")!==match)}}return true}});jQuery.fn.extend({data:function(key,value){var data=null;if(typeof key==="undefined"){if(this.length){data=jQuery.data(this[0]);if(this[0].nodeType===1){var attr=this[0].attributes,name;for(var i=0,l=attr.length;i<l;i++){name=attr[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.substring(5));dataAttr(this[0],name,data[name])}}}}return data}else{if(typeof key==="object"){return this.each(function(){jQuery.data(this,key)})}}var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value===undefined){data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data===undefined&&this.length){data=jQuery.data(this[0],key);data=dataAttr(this[0],key,data)}return data===undefined&&parts[1]?this.data(parts[0]):data}else{return this.each(function(){var $this=jQuery(this),args=[parts[0],value];$this.triggerHandler("setData"+parts[1]+"!",args);jQuery.data(this,key,value);$this.triggerHandler("changeData"+parts[1]+"!",args)})}},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:!jQuery.isNaN(data)?parseFloat(data):rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else{data=undefined}}return data}function isEmptyDataObject(obj){for(var name in obj){if(name!=="toJSON"){return false}}return true}function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery.data(elem,deferDataKey,undefined,true);if(defer&&(src==="queue"||!jQuery.data(elem,queueDataKey,undefined,true))&&(src==="mark"||!jQuery.data(elem,markDataKey,undefined,true))){setTimeout(function(){if(!jQuery.data(elem,queueDataKey,undefined,true)&&!jQuery.data(elem,markDataKey,undefined,true)){jQuery.removeData(elem,deferDataKey,true);defer.resolve()}},0)}}jQuery.extend({_mark:function(elem,type){if(elem){type=(type||"fx")+"mark";jQuery.data(elem,type,(jQuery.data(elem,type,undefined,true)||0)+1,true)}},_unmark:function(force,elem,type){if(force!==true){type=elem;elem=force;force=false}if(elem){type=type||"fx";var key=type+"mark",count=force?0:((jQuery.data(elem,key,undefined,true)||1)-1);if(count){jQuery.data(elem,key,count,true)}else{jQuery.removeData(elem,key,true);handleQueueMarkDefer(elem,type,"mark")}}},queue:function(elem,type,data){if(elem){type=(type||"fx")+"queue";var q=jQuery.data(elem,type,undefined,true);if(data){if(!q||jQuery.isArray(data)){q=jQuery.data(elem,type,jQuery.makeArray(data),true)}else{q.push(data)}}return q||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),defer;if(fn==="inprogress"){fn=queue.shift()}if(fn){if(type==="fx"){queue.unshift("inprogress")}fn.call(elem,function(){jQuery.dequeue(elem,type)})}if(!queue.length){jQuery.removeData(elem,type+"queue",true);handleQueueMarkDefer(elem,type,"queue")}}});jQuery.fn.extend({queue:function(type,data){if(typeof type!=="string"){data=type;type="fx"}if(data===undefined){return jQuery.queue(this[0],type)}return this.each(function(){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(){var elem=this;setTimeout(function(){jQuery.dequeue(elem,type)},time)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,object){if(typeof type!=="string"){object=type;type=undefined}type=type||"fx";var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",tmp;function resolve(){if(!(--count)){defer.resolveWith(elements,[elements])}}while(i--){if((tmp=jQuery.data(elements[i],deferDataKey,undefined,true)||(jQuery.data(elements[i],queueDataKey,undefined,true)||jQuery.data(elements[i],markDataKey,undefined,true))&&jQuery.data(elements[i],deferDataKey,jQuery._Deferred(),true))){count++;tmp.done(resolve)}}resolve();return defer.promise()}});var rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,nodeHook,boolHook;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,name,value,true,jQuery.attr)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,name,value,true,jQuery.prop)},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(value&&typeof value==="string"){classNames=value.split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(!~setClass.indexOf(" "+classNames[c]+" ")){setClass+=classNames[c]+" "}}elem.className=jQuery.trim(setClass)}}}}return this},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if((value&&typeof value==="string")||value===undefined){classNames=(value||"").split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){if(value){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ")}elem.className=jQuery.trim(className)}else{elem.className=""}}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else{if(type==="undefined"||type==="boolean"){if(this.className){jQuery._data(this,"__className__",this.className)}this.className=this.className||value===false?"":jQuery._data(this,"__className__")||""}}})},hasClass:function(selector){var className=" "+selector+" ";for(var i=0,l=this.length;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1){return true}}return false},val:function(value){var hooks,ret,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.nodeName.toLowerCase()]||jQuery.valHooks[elem.type];if(hooks&&"get" in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return undefined}var isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,self.val())}else{val=value}if(val==null){val=""}else{if(typeof val==="number"){val+=""}else{if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}}}hooks=jQuery.valHooks[this.nodeName.toLowerCase()]||jQuery.valHooks[this.type];if(!hooks||!("set" in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return !val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null}for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}if(one&&!values.length&&options.length){return jQuery(options[index]).val()}return values},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0});if(!values.length){elem.selectedIndex=-1}return values}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(elem,name,value,pass){var nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return undefined}if(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value)}if(!("getAttribute" in elem)){return jQuery.prop(elem,name,value)}var ret,hooks,notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.attrFix[name]||name;hooks=jQuery.attrHooks[name];if(!hooks){if(rboolean.test(name)){hooks=boolHook}else{if(nodeHook){hooks=nodeHook}}}}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return undefined}else{if(hooks&&"set" in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,""+value);return value}}}else{if(hooks&&"get" in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=elem.getAttribute(name);return ret===null?undefined:ret}}},removeAttr:function(elem,name){var propName;if(elem.nodeType===1){name=jQuery.attrFix[name]||name;jQuery.attr(elem,name,"");elem.removeAttribute(name);if(rboolean.test(name)&&(propName=jQuery.propFix[name]||name) in elem){elem[propName]=false}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed")}else{if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.get(elem,name)}return name in elem?elem.value:null},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.set(elem,value,name)}elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return undefined}var ret,hooks,notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{return(elem[name]=value)}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{return elem[name]}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});jQuery.attrHooks.tabIndex=jQuery.propHooks.tabIndex;boolHook={get:function(elem,name){var attrNode;return jQuery.prop(elem,name)===true||(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name)}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true}elem.setAttribute(name,name.toLowerCase())}return name}};if(!jQuery.support.getSetAttribute){nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&ret.nodeValue!==""?ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret)}return(ret.nodeValue=value+"")}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}})})}if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret}})})}if(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return(elem.style.cssText=""+value)}}}if(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}return null}})}if(!jQuery.support.checkOn){jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}})}jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0)}}})});var rnamespaces=/\.(.*)$/,rformElems=/^(?:textarea|input|select)$/i,rperiod=/\./g,rspaces=/ /g,rescape=/[^\w\s.|`]/g,fcleanup=function(nm){return nm.replace(rescape,"\\$&")};jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType===3||elem.nodeType===8){return}if(handler===false){handler=returnFalse}else{if(!handler){return}}var handleObjIn,handleObj;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler}if(!handler.guid){handler.guid=jQuery.guid++}var elemData=jQuery._data(elem);if(!elemData){return}var events=elemData.events,eventHandle=elemData.handle;if(!events){elemData.events=events={}}if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.handle.apply(eventHandle.elem,arguments):undefined}}eventHandle.elem=elem;types=types.split(" ");var type,i=0,namespaces;while((type=types[i++])){handleObj=handleObjIn?jQuery.extend({},handleObjIn):{handler:handler,data:data};if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();handleObj.namespace=namespaces.slice(0).sort().join(".")}else{namespaces=[];handleObj.namespace=""}handleObj.type=type;if(!handleObj.guid){handleObj.guid=handler.guid}var handlers=events[type],special=jQuery.event.special[type]||{};if(!handlers){handlers=events[type]=[];if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}else{if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle)}}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}handlers.push(handleObj);jQuery.event.global[type]=true}elem=null},global:{},remove:function(elem,types,handler,pos){if(elem.nodeType===3||elem.nodeType===8){return}if(handler===false){handler=returnFalse}var ret,type,fn,j,i=0,all,namespaces,namespace,special,eventType,handleObj,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem),events=elemData&&elemData.events;if(!elemData||!events){return}if(types&&types.type){handler=types.handler;types=types.type}if(!types||typeof types==="string"&&types.charAt(0)==="."){types=types||"";for(type in events){jQuery.event.remove(elem,type+types)}return}types=types.split(" ");while((type=types[i++])){origType=type;handleObj=null;all=type.indexOf(".")<0;namespaces=[];if(!all){namespaces=type.split(".");type=namespaces.shift();namespace=new RegExp("(^|\\.)"+jQuery.map(namespaces.slice(0).sort(),fcleanup).join("\\.(?:.*\\.)?")+"(\\.|$)")}eventType=events[type];if(!eventType){continue}if(!handler){for(j=0;j<eventType.length;j++){handleObj=eventType[j];if(all||namespace.test(handleObj.namespace)){jQuery.event.remove(elem,origType,handleObj.handler,j);eventType.splice(j--,1)}}continue}special=jQuery.event.special[type]||{};for(j=pos||0;j<eventType.length;j++){handleObj=eventType[j];if(handler.guid===handleObj.guid){if(all||namespace.test(handleObj.namespace)){if(pos==null){eventType.splice(j--,1)}if(special.remove){special.remove.call(elem,handleObj)}}if(pos!=null){break}}}if(eventType.length===0||pos!=null&&eventType.length===1){if(!special.teardown||special.teardown.call(elem,namespaces)===false){jQuery.removeEvent(elem,type,elemData.handle)}ret=null;delete events[type]}}if(jQuery.isEmptyObject(events)){var handle=elemData.handle;if(handle){handle.elem=null}delete elemData.events;delete elemData.handle;if(jQuery.isEmptyObject(elemData)){jQuery.removeData(elem,undefined,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(event,data,elem,onlyHandlers){var type=event.type||event,namespaces=[],exclusive;if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return}event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)");if(onlyHandlers||!elem){event.preventDefault();event.stopPropagation()}if(!elem){jQuery.each(jQuery.cache,function(){var internalKey=jQuery.expando,internalCache=this[internalKey];if(internalCache&&internalCache.events&&internalCache.events[type]){jQuery.event.trigger(event,data,internalCache.handle.elem)}});return}if(elem.nodeType===3||elem.nodeType===8){return}event.result=undefined;event.target=elem;data=data!=null?jQuery.makeArray(data):[];data.unshift(event);var cur=elem,ontype=type.indexOf(":")<0?"on"+type:"";do{var handle=jQuery._data(cur,"handle");event.currentTarget=cur;if(handle){handle.apply(cur,data)}if(ontype&&jQuery.acceptData(cur)&&cur[ontype]&&cur[ontype].apply(cur,data)===false){event.result=false;event.preventDefault()}cur=cur.parentNode||cur.ownerDocument||cur===event.target.ownerDocument&&window}while(cur&&!event.isPropagationStopped());if(!event.isDefaultPrevented()){var old,special=jQuery.event.special[type]||{};if((!special._default||special._default.call(elem.ownerDocument,event)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){try{if(ontype&&elem[type]){old=elem[ontype];if(old){elem[ontype]=null}jQuery.event.triggered=type;elem[type]()}}catch(ieError){}if(old){elem[ontype]=old}jQuery.event.triggered=undefined}}return event.result},handle:function(event){event=jQuery.event.fix(event||window.event);var handlers=((jQuery._data(this,"events")||{})[event.type]||[]).slice(0),run_all=!event.exclusive&&!event.namespace,args=Array.prototype.slice.call(arguments,0);args[0]=event;event.currentTarget=this;for(var j=0,l=handlers.length;j<l;j++){var handleObj=handlers[j];if(run_all||event.namespace_re.test(handleObj.namespace)){event.handler=handleObj.handler;event.data=handleObj.data;event.handleObj=handleObj;var ret=handleObj.handler.apply(this,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation()}}if(event.isImmediatePropagationStopped()){break}}}return event.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(event){if(event[jQuery.expando]){return event}var originalEvent=event;event=jQuery.Event(originalEvent);for(var i=this.props.length,prop;i;){prop=this.props[--i];event[prop]=originalEvent[prop]}if(!event.target){event.target=event.srcElement||document}if(event.target.nodeType===3){event.target=event.target.parentNode}if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement}if(event.pageX==null&&event.clientX!=null){var eventDocument=event.target.ownerDocument||document,doc=eventDocument.documentElement,body=eventDocument.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(event.which==null&&(event.charCode!=null||event.keyCode!=null)){event.which=event.charCode!=null?event.charCode:event.keyCode}if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey}if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)))}return event},guid:100000000,proxy:jQuery.proxy,special:{ready:{setup:jQuery.bindReady,teardown:jQuery.noop},live:{add:function(handleObj){jQuery.event.add(this,liveConvert(handleObj.origType,handleObj.selector),jQuery.extend({},handleObj,{handler:liveHandler,guid:handleObj.handler.guid}))},remove:function(handleObj){jQuery.event.remove(this,liveConvert(handleObj.origType,handleObj.selector),handleObj)}},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null}}}}};jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}}:function(elem,type,handle){if(elem.detachEvent){elem.detachEvent("on"+type,handle)}};jQuery.Event=function(src,props){if(!this.preventDefault){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=jQuery.now();this[jQuery.expando]=true};function returnFalse(){return false}function returnTrue(){return true}jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var withinElement=function(event){var related=event.relatedTarget,inside=false,eventType=event.type;event.type=event.data;if(related!==this){if(related){inside=jQuery.contains(this,related)}if(!inside){jQuery.event.handle.apply(this,arguments);event.type=eventType}}},delegate=function(event){event.type=event.data;jQuery.event.handle.apply(this,arguments)};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={setup:function(data){jQuery.event.add(this,fix,data&&data.selector?delegate:withinElement,orig)},teardown:function(data){jQuery.event.remove(this,fix,data&&data.selector?delegate:withinElement)}}});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(data,namespaces){if(!jQuery.nodeName(this,"form")){jQuery.event.add(this,"click.specialSubmit",function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.type:"";if((type==="submit"||type==="image")&&jQuery(elem).closest("form").length){trigger("submit",this,arguments)}});jQuery.event.add(this,"keypress.specialSubmit",function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.type:"";if((type==="text"||type==="password")&&jQuery(elem).closest("form").length&&e.keyCode===13){trigger("submit",this,arguments)}})}else{return false}},teardown:function(namespaces){jQuery.event.remove(this,".specialSubmit")}}}if(!jQuery.support.changeBubbles){var changeFilters,getVal=function(elem){var type=jQuery.nodeName(elem,"input")?elem.type:"",val=elem.value;if(type==="radio"||type==="checkbox"){val=elem.checked}else{if(type==="select-multiple"){val=elem.selectedIndex>-1?jQuery.map(elem.options,function(elem){return elem.selected}).join("-"):""}else{if(jQuery.nodeName(elem,"select")){val=elem.selectedIndex}}}return val},testChange=function testChange(e){var elem=e.target,data,val;if(!rformElems.test(elem.nodeName)||elem.readOnly){return}data=jQuery._data(elem,"_change_data");val=getVal(elem);if(e.type!=="focusout"||elem.type!=="radio"){jQuery._data(elem,"_change_data",val)}if(data===undefined||val===data){return}if(data!=null||val){e.type="change";e.liveFired=undefined;jQuery.event.trigger(e,arguments[1],elem)}};jQuery.event.special.change={filters:{focusout:testChange,beforedeactivate:testChange,click:function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")?elem.type:"";if(type==="radio"||type==="checkbox"||jQuery.nodeName(elem,"select")){testChange.call(this,e)}},keydown:function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")?elem.type:"";if((e.keyCode===13&&!jQuery.nodeName(elem,"textarea"))||(e.keyCode===32&&(type==="checkbox"||type==="radio"))||type==="select-multiple"){testChange.call(this,e)}},beforeactivate:function(e){var elem=e.target;jQuery._data(elem,"_change_data",getVal(elem))}},setup:function(data,namespaces){if(this.type==="file"){return false}for(var type in changeFilters){jQuery.event.add(this,type+".specialChange",changeFilters[type])}return rformElems.test(this.nodeName)},teardown:function(namespaces){jQuery.event.remove(this,".specialChange");return rformElems.test(this.nodeName)}};changeFilters=jQuery.event.special.change.filters;changeFilters.focus=changeFilters.beforeactivate}function trigger(type,elem,args){var event=jQuery.extend({},args[0]);event.type=type;event.originalEvent={};event.liveFired=undefined;jQuery.event.handle.call(elem,event);if(event.isDefaultPrevented()){args[0].preventDefault()}}if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0;jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true)}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true)}}};function handler(donor){var e=jQuery.event.fix(donor);e.type=fix;e.originalEvent={};jQuery.event.trigger(e,null,e.target);if(e.isDefaultPrevented()){donor.preventDefault()}}})}jQuery.each(["bind","one"],function(i,name){jQuery.fn[name]=function(type,data,fn){var handler;if(typeof type==="object"){for(var key in type){this[name](key,data,type[key],fn)}return this}if(arguments.length===2||data===false){fn=data;data=undefined}if(name==="one"){handler=function(event){jQuery(this).unbind(event,handler);return fn.apply(this,arguments)};handler.guid=fn.guid||jQuery.guid++}else{handler=fn}if(type==="unload"&&name!=="one"){this.one(type,data,fn)}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.add(this[i],type,handler,data)}}return this}});jQuery.fn.extend({unbind:function(type,fn){if(typeof type==="object"&&!type.preventDefault){for(var key in type){this.unbind(key,type[key])}}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.remove(this[i],type,fn)}}return this},delegate:function(selector,types,data,fn){return this.live(types,data,fn,selector)},undelegate:function(selector,types,fn){if(arguments.length===0){return this.unbind("live")}else{return this.die(types,null,fn,selector)}},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true)}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery.data(this,"lastToggle"+fn.guid)||0)%i;jQuery.data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false};toggler.guid=guid;while(i<args.length){args[i++].guid=guid}return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});var liveMap={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};jQuery.each(["live","die"],function(i,name){jQuery.fn[name]=function(types,data,fn,origSelector){var type,i=0,match,namespaces,preType,selector=origSelector||this.selector,context=origSelector?this:jQuery(this.context);if(typeof types==="object"&&!types.preventDefault){for(var key in types){context[name](key,data,types[key],selector)}return this}if(name==="die"&&!types&&origSelector&&origSelector.charAt(0)==="."){context.unbind(origSelector);return this}if(data===false||jQuery.isFunction(data)){fn=data||returnFalse;data=undefined}types=(types||"").split(" ");while((type=types[i++])!=null){match=rnamespaces.exec(type);namespaces="";if(match){namespaces=match[0];type=type.replace(rnamespaces,"")}if(type==="hover"){types.push("mouseenter"+namespaces,"mouseleave"+namespaces);continue}preType=type;if(liveMap[type]){types.push(liveMap[type]+namespaces);type=type+namespaces}else{type=(liveMap[type]||type)+namespaces}if(name==="live"){for(var j=0,l=context.length;j<l;j++){jQuery.event.add(context[j],"live."+liveConvert(type,selector),{data:data,selector:selector,handler:fn,origType:type,origHandler:fn,preType:preType})}}else{context.unbind("live."+liveConvert(type,selector),fn)}}return this}});function liveHandler(event){var stop,maxLevel,related,match,handleObj,elem,j,i,l,data,close,namespace,ret,elems=[],selectors=[],events=jQuery._data(this,"events");if(event.liveFired===this||!events||!events.live||event.target.disabled||event.button&&event.type==="click"){return}if(event.namespace){namespace=new RegExp("(^|\\.)"+event.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}event.liveFired=this;var live=events.live.slice(0);for(j=0;j<live.length;j++){handleObj=live[j];if(handleObj.origType.replace(rnamespaces,"")===event.type){selectors.push(handleObj.selector)}else{live.splice(j--,1)}}match=jQuery(event.target).closest(selectors,event.currentTarget);for(i=0,l=match.length;i<l;i++){close=match[i];for(j=0;j<live.length;j++){handleObj=live[j];if(close.selector===handleObj.selector&&(!namespace||namespace.test(handleObj.namespace))&&!close.elem.disabled){elem=close.elem;related=null;if(handleObj.preType==="mouseenter"||handleObj.preType==="mouseleave"){event.type=handleObj.preType;related=jQuery(event.relatedTarget).closest(handleObj.selector)[0];if(related&&jQuery.contains(elem,related)){related=elem}}if(!related||related!==elem){elems.push({elem:elem,handleObj:handleObj,level:close.level})}}}}for(i=0,l=elems.length;i<l;i++){match=elems[i];if(maxLevel&&match.level>maxLevel){break}event.currentTarget=match.elem;event.data=match.handleObj.data;event.handleObj=match.handleObj;ret=match.handleObj.origHandler.apply(match.elem,arguments);if(ret===false||event.isPropagationStopped()){maxLevel=match.level;if(ret===false){stop=false}if(event.isImmediatePropagationStopped()){break}}}return stop}function liveConvert(type,selector){return(type&&type!=="*"?type+".":"")+selector.replace(rperiod,"`").replace(rspaces,"&")}jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null}return arguments.length>0?this.bind(name,data,fn):this.trigger(name)};if(jQuery.attrFn){jQuery.attrFn[name]=true}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true,rBackslash=/\\/g,rNonWord=/\W/;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}var m,set,checkSet,extra,ret,cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){Sizzle.error(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else{if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i])}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}}else{makeArray(checkSet,results)}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0};Sizzle.find=function(expr,context,isXML){var set;if(!expr){return[]}for(var i=0,l=Expr.order.length;i<l;i++){var match,type=Expr.order[i];if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(rBackslash,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set){set=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName("*"):[]}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var found,item,filter=Expr.filter[type],left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue}if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else{if(match===true){continue}}}if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else{if(pass){result.push(item);anyFound=true}}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){Sizzle.error(expr)}else{break}}old=expr}return curLoop};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:function(match,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(match[1])}}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(rBackslash,"")+" ";if(isXML){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else{if(inplace){curLoop[i]=false}}}}return false},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0}else{if(match[2]){Sizzle.error(match[0])}}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}match[4]=(match[4]||match[5]||"").replace(rBackslash,"");if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret)}return false}}else{if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true}}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},parent:function(elem){return !!elem.firstChild},empty:function(elem){return !elem.firstChild},has:function(elem,i,match){return !!Sizzle(match[3],elem).length},header:function(elem){return(/h\d/i).test(elem.nodeName)},text:function(elem){return"text"===elem.getAttribute("type")},radio:function(elem){return"radio"===elem.type},checkbox:function(elem){return"checkbox"===elem.type},file:function(elem){return"file"===elem.type},password:function(elem){return"password"===elem.type},submit:function(elem){return"submit"===elem.type},image:function(elem){return"image"===elem.type},reset:function(elem){return"reset"===elem.type},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button"},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName)}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else{if(name==="contains"){return(elem.textContent||elem.innerText||Sizzle.getText([elem])||"").indexOf(match[3])>=0}else{if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false}}return true}else{Sizzle.error(name)}}}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true}var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent.sizcache=doneName}var diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape))}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array)}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i])}}else{for(;array[i];i++){ret.push(array[i])}}}return ret}}var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}}else{sortOrder=function(a,b){var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(a===b){hasDuplicate=true;return 0}else{if(aup===bup){return siblingCheck(a,b)}else{if(!aup){return -1}else{if(!bup){return 1}}}}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};siblingCheck=function(a,b,ret){if(a===b){return ret}var cur=a.nextSibling;while(cur){if(cur===b){return -1}cur=cur.nextSibling}return 1}}Sizzle.getText=function(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue}else{if(elem.nodeType!==8){ret+=Sizzle.getText(elem.childNodes)}}}return ret};(function(){var form=document.createElement("div"),id="script"+(new Date()).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>";root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}}root.removeChild(form);root=form=null})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}}div=null})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return}Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(context.nodeType===1||context.nodeType===9)){if(match[1]){return makeArray(context.getElementsByTagName(query),extra)}else{if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName){return makeArray(context.getElementsByClassName(match[2]),extra)}}}if(context.nodeType===9){if(query==="body"&&context.body){return makeArray([context.body],extra)}else{if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3]){return makeArray([elem],extra)}}else{return makeArray([],extra)}}}try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else{if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old){context.setAttribute("id",nid)}else{nid=nid.replace(/'/g,"\\$&")}if(relativeHierarchySelector&&hasParent){context=context.parentNode}try{if(!relativeHierarchySelector||hasParent){return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}}catch(pseudoError){}finally{if(!old){oldContext.removeAttribute("id")}}}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop]}div=null})()}(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector,pseudoWorks=false;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=true}if(matches){Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node)){try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){return matches.call(node,expr)}}catch(e){}}return Sizzle(expr,null,null,[node]).length>0}}})();(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return}div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return}Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1])}};div=null})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else{if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}}elem=elem[dir]}checkSet[i]=match}}}if(document.documentElement.contains){Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true)}}else{if(document.documentElement.compareDocumentPosition){Sizzle.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}}else{Sizzle.contains=function(){return false}}}Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet)}return Sizzle.filter(later,tmpSet)};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.POS,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var self=this,i,l;if(typeof selector!=="string"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true}}})}var ret=this.pushStack("","find",selector),length,n,r;for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break}}}}}return ret},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector)},is:function(selector){return !!selector&&(typeof selector==="string"?jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){var match,selector,matches={},level=1;if(cur&&selectors.length){for(i=0,l=selectors.length;i<l;i++){selector=selectors[i];if(!matches[selector]){matches[selector]=POS.test(selector)?jQuery(selector,context||this.context):selector}}while(cur&&cur.ownerDocument&&cur!==context){for(selector in matches){match=matches[selector];if(match.jquery?match.index(cur)>-1:jQuery(cur).is(match)){ret.push({selector:selector,elem:cur,level:level})}}cur=cur.parentNode;level++}}return ret}var pos=POS.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;i<l;i++){cur=this[i];while(cur){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}else{cur=cur.parentNode;if(!cur||!cur.ownerDocument||cur===context||cur.nodeType===11){break}}}}ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors)},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem))}return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}});function isDisconnected(node){return !node||!node.parentNode||node.parentNode.nodeType===11}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until),args=slice.call(arguments);if(!runtil.test(name)){selector=until}if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret)}ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse()}return this.pushStack(ret,name,args.join(","))}});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")"}return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur)}cur=cur[dir]}return matched},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break}}return cur},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n)}}return r}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep})}else{if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep})}else{if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep)}else{qualifier=jQuery.filter(qualifier,filtered)}}}}return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep})}var rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnocache=/<(?:script|object|embed|option|style)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"div<div>","</div>"]}jQuery.fn.extend({text:function(text){if(jQuery.isFunction(text)){return this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()))})}if(typeof text!=="object"&&text!==undefined){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text))}return jQuery.text(this)},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this)})}else{if(arguments.length){var set=jQuery(arguments[0]);set.push.apply(set,this.toArray());return this.pushStack(set,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)})}else{if(arguments.length){var set=this.pushStack(this,"after",arguments);set.push.apply(set,jQuery(arguments[0]).toArray());return set}}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem])}if(elem.parentNode){elem.parentNode.removeChild(elem)}}}return this},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"))}while(elem.firstChild){elem.removeChild(elem.firstChild)}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){if(value===undefined){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(rinlinejQuery,""):null}else{if(typeof value==="string"&&!rnocache.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(var i=0,l=this.length;i<l;i++){if(this[i].nodeType===1){jQuery.cleanData(this[i].getElementsByTagName("*"));this[i].innerHTML=value}}}catch(e){this.empty().append(value)}}else{if(jQuery.isFunction(value)){this.each(function(i){var self=jQuery(this);self.html(value.call(this,i,self.html()))})}else{this.empty().append(value)}}}return this},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))})}if(typeof value!=="string"){value=jQuery(value).detach()}return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value)}else{jQuery(parent).append(value)}})}else{return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this}},detach:function(selector){return this.remove(selector,true)},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true)})}if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback)})}if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent}}else{results=jQuery.buildFragment(args,this,scripts)}fragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild}else{first=fragment.firstChild}if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;i<l;i++){callback.call(table?root(this[i],first):this[i],results.cacheable||(l>1&&i<lastIndex)?jQuery.clone(fragment,true,true):fragment)}}if(scripts.length){jQuery.each(scripts,evalScript)}}return this}});function root(elem,cur){return jQuery.nodeName(elem,"table")?(elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody"))):elem}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return}var internalKey=jQuery.expando,oldData=jQuery.data(src),curData=jQuery.data(dest,oldData);if((oldData=oldData[internalKey])){var events=oldData.events;curData=curData[internalKey]=jQuery.extend({},oldData);if(events){delete curData.handle;curData.events={};for(var type in events){for(var i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type+(events[type][i].namespace?".":"")+events[type][i].namespace,events[type][i],events[type][i].data)}}}}}function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return}if(dest.clearAttributes){dest.clearAttributes()}if(dest.mergeAttributes){dest.mergeAttributes(src)}nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){dest.outerHTML=src.outerHTML}else{if(nodeName==="input"&&(src.type==="checkbox"||src.type==="radio")){if(src.checked){dest.defaultChecked=dest.checked=src.checked}if(dest.value!==src.value){dest.value=src.value}}else{if(nodeName==="option"){dest.selected=src.defaultSelected}else{if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}}}dest.removeAttribute(jQuery.expando)}jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc;if(nodes&&nodes[0]){doc=nodes[0].ownerDocument||nodes[0]}if(!doc.createDocumentFragment){doc=document}if(args.length===1&&typeof args[0]==="string"&&args[0].length<512&&doc===document&&args[0].charAt(0)==="<"&&!rnocache.test(args[0])&&(jQuery.support.checkClone||!rchecked.test(args[0]))){cacheable=true;cacheresults=jQuery.fragments[args[0]];if(cacheresults&&cacheresults!==1){fragment=cacheresults}}if(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,scripts)}if(cacheable){jQuery.fragments[args[0]]=cacheresults?fragment:1}return{fragment:fragment,cacheable:cacheable}};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}});function getAll(elem){if("getElementsByTagName" in elem){return elem.getElementsByTagName("*")}else{if("querySelectorAll" in elem){return elem.querySelectorAll("*")}else{return[]}}}function fixDefaultChecked(elem){if(elem.type==="checkbox"||elem.type==="radio"){elem.defaultChecked=elem.checked}}function findInputs(elem){if(jQuery.nodeName(elem,"input")){fixDefaultChecked(elem)}else{if("getElementsByTagName" in elem){jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}}}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var clone=elem.cloneNode(true),srcElements,destElements,i;if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i])}}}if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i])}}}srcElements=destElements=null;return clone},clean:function(elems,context,fragment,scripts){var checkScriptType;context=context||document;if(typeof context.createElement==="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document}var ret=[],j;for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+=""}if(!elem){continue}if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem)}else{elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild}if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j])}}}if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild)}elem=div.childNodes}}var len;if(!jQuery.support.appendChecked){if(elem[0]&&typeof(len=elem.length)==="number"){for(j=0;j<len;j++){findInputs(elem[j])}}else{findInputs(elem)}}if(elem.nodeType){ret.push(elem)}else{ret=jQuery.merge(ret,elem)}}if(fragment){checkScriptType=function(elem){return !elem.type||rscriptType.test(elem.type)};for(i=0;ret[i];i++){if(scripts&&jQuery.nodeName(ret[i],"script")&&(!ret[i].type||ret[i].type.toLowerCase()==="text/javascript")){scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i])}else{if(ret[i].nodeType===1){var jsTags=jQuery.grep(ret[i].getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags))}fragment.appendChild(ret[i])}}}return ret},cleanData:function(elems){var data,id,cache=jQuery.cache,internalKey=jQuery.expando,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){continue}id=elem[jQuery.expando];if(id){data=cache[id]&&cache[id][internalKey];if(data&&data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}if(data.handle){data.handle.elem=null}}if(deleteExpando){delete elem[jQuery.expando]}else{if(elem.removeAttribute){elem.removeAttribute(jQuery.expando)}}delete cache[id]}}}});function evalScript(i,elem){if(elem.src){jQuery.ajax({url:elem.src,async:false,dataType:"script"})}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/"))}if(elem.parentNode){elem.parentNode.removeChild(elem)}}var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,rrelNum=/^([\-+])=([\-+.\de]+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"],curCSS,getComputedStyle,currentStyle;jQuery.fn.css=function(name,value){if(arguments.length===2&&value===undefined){return this}return jQuery.access(this,name,value,true,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)})};jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity","opacity");return ret===""?"1":ret}else{return elem.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||origName;if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(+(ret[1]+1)*+ret[2])+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||type==="number"&&isNaN(value)){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!hooks||!("set" in hooks)||(value=hooks.set(elem,value))!==undefined){try{style[name]=value}catch(e){}}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra){var ret,hooks;name=jQuery.camelCase(name);hooks=jQuery.cssHooks[name];name=jQuery.cssProps[name]||name;if(name==="cssFloat"){name="float"}if(hooks&&"get" in hooks&&(ret=hooks.get(elem,true,extra))!==undefined){return ret}else{if(curCSS){return curCSS(elem,name)}}},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name]}callback.call(elem);for(name in options){elem.style[name]=old[name]}}});jQuery.curCSS=jQuery.css;jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){var val;if(computed){if(elem.offsetWidth!==0){return getWH(elem,name,extra)}else{jQuery.swap(elem,cssShow,function(){val=getWH(elem,name,extra)})}return val}},set:function(elem,value){if(rnumpx.test(value)){value=parseFloat(value);if(value>=0){return value+"px"}}else{return value}}}});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNaN(value)?"":"alpha(opacity="+value*100+")",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter){return}}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}}}jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){var ret;jQuery.swap(elem,{display:"inline-block"},function(){if(computed){ret=curCSS(elem,"margin-right","marginRight")}else{ret=elem.style.marginRight}});return ret}}}});if(document.defaultView&&document.defaultView.getComputedStyle){getComputedStyle=function(elem,name){var ret,defaultView,computedStyle;name=name.replace(rupper,"-$1").toLowerCase();if(!(defaultView=elem.ownerDocument.defaultView)){return undefined}if((computedStyle=defaultView.getComputedStyle(elem,null))){ret=computedStyle.getPropertyValue(name);if(ret===""&&!jQuery.contains(elem.ownerDocument.documentElement,elem)){ret=jQuery.style(elem,name)}}return ret}}if(document.documentElement.currentStyle){currentStyle=function(elem,name){var left,ret=elem.currentStyle&&elem.currentStyle[name],rsLeft=elem.runtimeStyle&&elem.runtimeStyle[name],style=elem.style;if(!rnumpx.test(ret)&&rnum.test(ret)){left=style.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left}style.left=name==="fontSize"?"1em":(ret||0);ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft}}return ret===""?"auto":ret}}curCSS=getComputedStyle||currentStyle;function getWH(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,which=name==="width"?cssWidth:cssHeight;if(val>0){if(extra!=="border"){jQuery.each(which,function(){if(!extra){val-=parseFloat(jQuery.css(elem,"padding"+this))||0}if(extra==="margin"){val+=parseFloat(jQuery.css(elem,extra+this))||0}else{val-=parseFloat(jQuery.css(elem,"border"+this+"Width"))||0}})}return val+"px"}val=curCSS(elem,name,name);if(val<0||val==null){val=elem.style[name]||0}val=parseFloat(val)||0;if(extra){jQuery.each(which,function(){val+=parseFloat(jQuery.css(elem,"padding"+this))||0;if(extra!=="padding"){val+=parseFloat(jQuery.css(elem,"border"+this+"Width"))||0}if(extra==="margin"){val+=parseFloat(jQuery.css(elem,extra+this))||0}})}return val+"px"}if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return(width===0&&height===0)||(!jQuery.support.reliableHiddenOffsets&&(elem.style.display||jQuery.css(elem,"display"))==="none")};jQuery.expr.filters.visible=function(elem){return !jQuery.expr.filters.hidden(elem)}}return jQuery})(window);optly.match.matchUrl=function(url,string,type){switch(type){case"exact":url=optly.match.stripUrl(url);url=optly.match.stripVarFromQuery(url,"optimizely_log");url=optly.match.stripVarFromQuery(url,"optimizely_verbose");return url===optly.match.stripUrl(string);case"regex":try{return Boolean(url.match(string))}catch(error){return false}case"simple":url=optly.match.simplifyUrl(url);string=optly.match.simplifyUrl(string);return url===string;case"substring":url=optly.match.stripUrl(url,true);string=optly.match.stripUrl(string,true);return url.indexOf(string)!==-1;default:return false}};optly.match.removeParameters=function(url){var index=url.indexOf("?");if(index!==-1){url=url.substring(0,index)}index=url.indexOf("#");if(index!==-1){url=url.substring(0,index)}return url};optly.match.simplifyUrl=function(url){return optly.match.stripUrl(optly.match.removeParameters(url))};optly.match.stripUrl=function(url,excludeOptionalPrefixesToStrip){url=url.toLowerCase().replace(/[/&?]+$/,"");var prefixesToStrip=optly.match.REQUIRED_PREFIXES_TO_STRIP.slice(0);if(!excludeOptionalPrefixesToStrip){prefixesToStrip=prefixesToStrip.concat(optly.match.OPTIONAL_PREFIXES_TO_STRIP)}var length=prefixesToStrip.length;for(var i=0;i<length;i++){var prefixToStrip=prefixesToStrip[i];var prefixRegEx=new RegExp("^"+prefixToStrip);url=url.replace(prefixRegEx,"")}return url};optly.match.stripVarFromQuery=function(url,stripVar){return url.replace("&"+stripVar+"=true","").replace("?"+stripVar+"=true&","?").replace("?"+stripVar+"=true","")};optly.match.REQUIRED_PREFIXES_TO_STRIP=["https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"];optly.match.OPTIONAL_PREFIXES_TO_STRIP=["www."];integrator.activateSiteCatalyst=function(options){options=options||{};if(!directive.shouldTrackEvents){return}if(options&&options.sVariable){integrator.setSiteCatalystSVar(options.sVariable)}var siteCatalyst=integrator.getSiteCatalystSVar();if(!siteCatalyst){timer.addEvent("Integrator","Error with SiteCatalyst integration: 's' variable not defined");return}if(!integrator.hasIntegratedThirdParties){integrator.alsoActivateSiteCatalyst=true;return}integrator.fixSiteCatalystReferrer(siteCatalyst);log("Integrator","Tracking with SiteCatalyst");each(integrator.getRelevantVariationIds(),function(variationId){var experimentId=data.getVariationExperimentId(variationId);var keyValue=integrator.makeSendableNames(experimentId,variationId,100,100,25,true);var value=keyValue.key+": "+keyValue.value;each(integrator.getSiteCatalystKeys(experimentId),function(key){log("Integrator","Setting SiteCatalyst %s='%s'",key,value);siteCatalyst[key]=value})})};integrator.googleAnalyticsCustomVariableScope=function(scope){scope=isNumberLike(scope)?Number(scope):-1;if([1,2,3].indexOf(scope)!==-1){integrator._googleAnalyticsCustomVariableScope=scope}else{return integrator._googleAnalyticsCustomVariableScope}};integrator.loadThirdPartySegments=function(){timer.addEvent("Integrator","Loading third-party segments.");if(data.isBlueKaiEnabled()&&window.bk_results){integrator.loadBlueKaiSegments(window.bk_results)}};integrator.makeThirdPartyRequests=function(){if(!directive.shouldTrackEvents){return}integrator.initializeReferrerInfo();integrator.fixGoogleAnalyticsReferrer();each(integrator.getRelevantVariationIds(),function(variationId){var experimentId=data.getVariationExperimentId(variationId);if(data.isChartbeatEnabled(experimentId)){integrator.makeChartbeatRequest(experimentId,variationId)}if(data.isCrazyEggEnabled(experimentId)){integrator.makeCrazyEggRequest(experimentId,variationId)}if(data.isGoogleAnalyticsEnabled(experimentId)){integrator.makeGoogleAnalyticsRequest(experimentId,variationId)}if(data.isKissMetricsEnabled()){integrator.makeKissMetricsRequest(experimentId,variationId)}if(data.isMixpanelEnabled(experimentId)){integrator.makeMixpanelRequest(experimentId,variationId)}});integrator.makeChartbeatReferralRequest();integrator.hasIntegratedThirdParties=true;if(integrator.alsoActivateSiteCatalyst){integrator.activateSiteCatalyst();integrator.alsoActivateSiteCatalyst=false}};integrator.playbackClickTale=function(){if(window.ClickTaleContext){try{window.ClickTaleContext["getAggregationContextAsync"]("1",function(context){if(context.Location){window.optimizely.push(["overrideUrl",context.Location])}for(var key in context.PageEvents){var combinations=context.PageEvents[key][2].match(/x[0-9]+=[0-9_]+/g);log("Integrator","Playback ClickTale Integration - %s",combinations);for(var key=0;key<combinations.length;key++){log("Integrator","Playback ClickTale Integration - %s",combinations[key]);var experiment=combinations[key].split("=")[0].substr(1);var variations=combinations[key].split("=")[1].split("_");for(var variationIndex=0;variationIndex<variations.length;variationIndex++){if(!integrator.getRedirectURL(variations[variationIndex])){window.optimizely.push(["activate",experiment,variations[variationIndex],{force:true}])}else{log("Integrator","Skip activation for redirect.")}}}}})}catch(e){log("Integrator","Playback ClickTale Aggregation Integration failed.")}try{window.ClickTaleContext["getRecordingContextAsync"]("1.1",function(context){if(context.inSingleRecordingScope){if(context.location){window.optimizely.push(["overrideUrl",context.location])}log("Integrator","Playback ClickTale getRecordingContextAsync callback");for(var key in context.fields){log("Integrator","Playback ClickTale Integration - %s=%s",key,context.fields[key]);if(!integrator.getRedirectURL(context.fields[key])){window.optimizely.push(["activate",key,context.fields[key],{force:true}])}else{log("Integrator","Skip activation for redirect.")}}}})}catch(e){log("Integrator","Playback ClickTale Recording Integration failed.")}}else{log("Integrator","ClickTaleContext not defined.")}};integrator.recordClickTale=function(options){log("Integrator","Tracking with ClickTale.");if(typeof window.ClickTaleField=="function"){each(integrator.getRelevantVariationIds(),function(variationId){var experimentId=data.getVariationExperimentId(variationId);var keyValue=integrator.makeSendableNames(experimentId,variationId,100,100,15,false);var value=keyValue.key+": "+keyValue.value+" (x"+experimentId+"="+variationId+")";log("Integrator","Setting ClickTale - %s",value);window.ClickTaleField(experimentId,variationId);window.ClickTaleEvent(value)})}else{log("Integrator","ClickTaleField() not defined.")}};integrator.setPrefix=function(prefix){integrator.prefix=prefix};integrator.setSiteCatalystSVar=function(siteCatalystObject){integrator.siteCatalystObject=siteCatalystObject};integrator.cleanSegmentString=function(input,maxLength){return input.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_").substring(0,maxLength)};integrator.fixGoogleAnalyticsReferrer=function(){var referrer=integrator.actualReferrer;if(referrer){try{log("Integrator","Fixing _gaq._setReferrerOverride with %s",referrer);_gaq.push(["_setReferrerOverride",referrer])}catch(exception){log("Integrator","Error setting Google Analytics referrer: %s",exception)}}};integrator.fixSiteCatalystReferrer=function(siteCatalyst){var referrer=integrator.actualReferrer;if(referrer&&siteCatalyst){try{log("Integrator","Fixing SiteCatalyst referrer to %s",referrer);siteCatalyst.referrer=String(referrer)}catch(exception){log("Integrator","Error setting SiteCatalyst referrer: %s",exception)}}};integrator.getRelevantVariationIds=function(){var activeExperimentIds=evaluator.getActiveExperimentIds();var variationIds=[];each(plan.getVariationIds(),function(variationId){var experimentId=data.getVariationExperimentId(variationId);var relevant=false;if(data.isExperimentEnabled(experimentId)){var variationName=data.getVariationName(variationId);if(arrayContains(activeExperimentIds,experimentId)){log("Integrator",'"%s" relevant because experiment active',variationName);relevant=true}var isRedirectVariation=!!integrator.getRedirectURL(variationId);if(isRedirectVariation){var redirectVariationId=redirect.getRedirectCookie();if(redirectVariationId){integrator.redirectVariationId=redirectVariationId}if((integrator.redirectVariationId==variationId||redirect.detectNoCookieRedirect(data.getVariationCode(variationId)))){log("Integrator",'"%s" relevant because it redirected to here',variationName);relevant=true}}if(relevant){variationIds.push(variationId)}}});return variationIds};integrator.getSiteCatalystKeys=function(experimentId){var keys=[];var eVar=data.getSiteCatalystEVar(experimentId);var prop=data.getSiteCatalystProp(experimentId);if(eVar!==null){keys.push("eVar"+eVar)}if(prop!==null){keys.push("prop"+prop)}return keys};integrator.getSiteCatalystSVar=function(){return integrator.siteCatalystObject||(typeof window.s!=="undefined"?window.s:null)};integrator.initializeReferrerInfo=function(){var referrer=cookie.get(REFERRER_REDIRECT_COOKIE_NAME);if(referrer&&referrer.length>0){integrator.actualReferrer=referrer;cookie.set(REFERRER_REDIRECT_COOKIE_NAME,"")}};integrator.getRedirectURL=function(variationId){var redirectURLMatch=redirect.getRedirectURL(data.getVariationCode(variationId));if(redirectURLMatch){return redirectURLMatch[1]}return null};integrator.loadBlueKaiSegments=function(data){timer.addEvent("Integrator","Loading BlueKai segments.");try{var campaigns=data.campaigns;for(var campaignIndex=0;campaignIndex<campaigns.length;campaignIndex++){var categories=campaigns[campaignIndex]["categories"];for(var categoryIndex=0;categoryIndex<categories.length;categoryIndex++){var category=categories[categoryIndex];var segmentName="bk_segment_"+category.categoryID.toString();segmenter.addToSegment(segmentName,true)}}}catch(e){timer.addEvent("Integrator","Error loading BlueKai segments.")}};integrator.makeChartbeatReferralRequest=function(){var customValue=cookie.get(REFERRAL_CHARTBEAT_COOKIE_NAME)||"";try{if(customValue&&integrator.currentChartbeatExperiment!=customValue){log("Integrator","Calling _cbq.push for referral");_cbq.push(["_optlyr",customValue])}if(integrator.currentChartbeatExperiment!=customValue){log("Integrator","Set new Chartbeat referral cookie.");cookie.set(REFERRAL_CHARTBEAT_COOKIE_NAME,integrator.currentChartbeatExperiment)}}catch(error){timer.addEvent("Integrator","Error sending Chartbeat referral for "+customValue)}};integrator.makeChartbeatRequest=function(experimentId,variationId){var curPrefix=integrator.prefix;integrator.setPrefix("");var keyValue=integrator.makeSendableNames(experimentId,variationId,10,10,5,false);integrator.setPrefix(curPrefix);var variationIndex=data.getVariationIndex(variationId);integrator.currentChartbeatExperiment=keyValue.key+": "+String(variationIndex);try{log("Integrator","Calling _cbq.push");_cbq.push(["_optlyx",integrator.currentChartbeatExperiment])}catch(error){timer.addEvent("Integrator","Error sending Chartbeat data for "+data.getExperimentString(experimentId))}};integrator.makeCrazyEggRequest=function(experimentId,variationId){var keyValue=integrator.makeSendableNames(experimentId,variationId,100,100,15,false);try{log("Integrator","Defining CE_SNAPSHOT_NAME");window.CE_SNAPSHOT_NAME=keyValue.key+": "+keyValue.value}catch(error){timer.addEvent("Integrator","Error sending CrazyEgg data for "+data.getExperimentString(experimentId))}};integrator.makeGoogleAnalyticsRequest=function(experimentId,variationId){var slot=data.getGoogleAnalyticsSlot(experimentId);var tracker=data.getGoogleAnalyticsTracker(experimentId);var keyValue=integrator.makeSendableNames(experimentId,variationId,28,24,5,true);try{var prefix="";if(tracker!==""){prefix=tracker+"."}log("Integrator","Calling _gaq._setCustomVar for slot %d and scope %d",slot,integrator._googleAnalyticsCustomVariableScope);_gaq.push([prefix+"_setCustomVar",slot,keyValue.key,keyValue.value,integrator._googleAnalyticsCustomVariableScope])}catch(error){timer.addEvent("Integrator","Error sending Google Analytics data for "+data.getExperimentString(experimentId))}};integrator.makeKissMetricsRequest=function(experimentId,variationId){var keyValue=integrator.makeSendableNames(experimentId,variationId,100,100,15,true);var kissMetricsKeyValue={};kissMetricsKeyValue[keyValue.key]=keyValue.value;try{log("Integrator","Calling _kmq.set");_kmq.push(["set",kissMetricsKeyValue])}catch(error){timer.addEvent("Integrator","Error sending KISSmetrics data for "+data.getExperimentString(experimentId))}};integrator.makeMixpanelRequest=function(experimentId,variationId){var keyValue=integrator.makeSendableNames(experimentId,variationId,100,100,15,false);var mixpanelKeyValue={};mixpanelKeyValue[keyValue.key]=keyValue.value;try{log("Integrator","Calling mixpanel.push");mixpanel.push(["register",mixpanelKeyValue])}catch(error){timer.addEvent("Integrator","Error sending Mixpanel data for "+data.getExperimentString(experimentId))}};integrator.makeSendableNames=function(experimentId,variationId,expLength,varLength,mvtVarLength,makeClean){var expName=integrator.prefix+data.getExperimentName(experimentId);var varNamesArray=data.getVariationNamesArray(variationId);var varName;if(varNamesArray.length>1){varNamesArray=$.map(varNamesArray,(function(str){return str.substr(0,mvtVarLength-1)}));varName=varNamesArray.join("~")}else{varName=varNamesArray[0]}if(makeClean){expName=integrator.cleanSegmentString(expName,expLength);varName=integrator.cleanSegmentString(varName.replace("#",""),varLength)}else{expName=expName.substring(0,expLength);varName=varName.substring(0,varLength)}return{key:expName,value:varName}};integrator.alsoActivateSiteCatalyst=false;integrator.currentChartbeatExperiment="";integrator._googleAnalyticsCustomVariableScope=2;integrator.hasIntegratedThirdParties=false;integrator.prefix="Optimizely ";integrator.siteCatalystObject=null;integrator.actualReferrer=null;integrator.redirectVariationId=null;api.activate=function(activateExperimentId,variationIdOrForcedActivation,options){if(!directive.isEnabled){return false}var preferredVariationId=(typeof variationIdOrForcedActivation==="number"||typeof variationIdOrForcedActivation==="string")?String(variationIdOrForcedActivation):null;var forcedActivation=((variationIdOrForcedActivation===true)||(variationIdOrForcedActivation&&variationIdOrForcedActivation.force===true)||(options&&options.force===true));var skipBucketing=((typeof variationIdOrForcedActivation==="object"&&variationIdOrForcedActivation.skip===true)||(typeof options==="object"&&options.skip===true));var skipPageviewTracking=((typeof variationIdOrForcedActivation==="object"&&variationIdOrForcedActivation.skipPageview===true)||(typeof options==="object"&&options.skipPageview===true));if(preferredVariationId){try{api.bucketUser((activateExperimentId),preferredVariationId,true)}catch(err){timer.addEvent("API","Error while activating experiment "+activateExperimentId+" for variation "+preferredVariationId+" -- proceeding without bucketing user.")}}var pickedVariation=null;var experimentsToActivate=[];var experimentsToEvaluate=[];if(isNumberLike(activateExperimentId)){experimentsToActivate.push(activateExperimentId)}else{each(data.getExperimentIds(),function(experimentId){if(data.getExperimentManualMode(experimentId)){experimentsToActivate.push(experimentId)}})}timer.addEvent("API","Testing experiments to activate");each(experimentsToActivate,function(experimentId){if(!forcedActivation&&!condition.isReadyToTest(experimentId)){api.addGeoDelayedExperiment(experimentId)}else{if(forcedActivation||condition.passesTests(experimentId,{manualMode:true,objectType:"experiment"})){pickedVariation=distributor.distributeExperiment(experimentId,skipBucketing);if(pickedVariation){experimentsToEvaluate.push(experimentId)}}}});evaluator.evaluate(experimentsToEvaluate,experimentsToActivate);plan.writeCookie();integrator.makeThirdPartyRequests();if(directive.isEnabled&&!skipPageviewTracking){tracker.addLogEvent(document.location.href)}};api.activateGeoDelayedExperiments=function(){if(!directive.isEnabled){return false}timer.addEvent("API","Testing geodelayed segments");var segmentsToActivate=api.geoDelayedSegments;each(segmentsToActivate,function(segmentId){segmenter.evaluateSegment(segmentId)});var pickedVariation=null;var experimentsToActivate=api.geoDelayedExperiments;var experimentsToEvaluate=[];timer.addEvent("API","Testing geodelayed experiments");each(experimentsToActivate,function(experimentId){if(condition.passesTests(experimentId,{manualMode:true,objectType:"experiment"})){pickedVariation=distributor.distributeExperiment(experimentId);if(pickedVariation){experimentsToEvaluate.push(experimentId)}}});evaluator.evaluate(experimentsToEvaluate,experimentsToActivate);plan.writeCookie();integrator.makeThirdPartyRequests();if(directive.isEnabled&&!directive.shouldSkipPageTracking){tracker.addLogEvent(document.location.href)}api.invalidateGeoDelayedExperiments();api.invalidateGeoDelayedSegments();window.optimizelyGeo={};return true};api.addGeoDelayedExperiment=function(experimentId){api.geoDelayedExperiments.push(experimentId)};api.addGeoDelayedSegment=function(segmentId){api.geoDelayedSegments.push(segmentId)};api.areThereGeoDelayedExperiments=function(){return api.geoDelayedExperiments.length!==0};api.areThereGeoDelayedSegments=function(){return api.areThereGeoDelayedSegments.length!==0};api.bucketUser=function(experimentId,variationIdOrIndex,doNotSendPageviewTracking){doNotSendPageviewTracking=(doNotSendPageviewTracking===true);directive.shouldOverrideThirdPartyCookie=true;if(directive.isEnabled&&!doNotSendPageviewTracking){tracker.addLogEvent(document.location.href)}experimentId=String(experimentId);variationIdOrIndex=String(variationIdOrIndex);if(variationIdOrIndex==="-1"){plan.removeExperiment(experimentId)}else{var variationId=null;if(Number(variationIdOrIndex)<=256){variationId=String(data.getVariationIdByIndex(experimentId,variationIdOrIndex))}else{variationId=String(variationIdOrIndex)}var sectionIds=data.getExperimentSectionIds(experimentId);if(sectionIds&&sectionIds.length>0){distributor.preferMVTVariation(experimentId,variationId)}else{plan.addVariation(variationId,"api.bucketUser",false,true)}}plan.writeCookie()};api.disable=function(type){if(type&&type==="tracking"){directive.shouldTrackEvents=false}else{directive.isEnabled=false;directive.shouldTrackEvents=false}};api.finalize=function(){timer.addEvent("API","Finalizing API.");api.setPublicObjects();api.isFinalized=true};api.getVariationNamesMap=function(){return api.variationNamesMap};api.hasLocationDataArrived=function(){return window.optimizely["data"]["visitor"]["location"]["city"]!==""||window.optimizely["data"]["visitor"]["location"]["continent"]!==""||window.optimizely["data"]["visitor"]["location"]["country"]!==""||window.optimizely["data"]["visitor"]["location"]["region"]!==""};api.initialize=function(){api.isFinalized=false;segmenter.addChangeHandler(api.setPublicObjects);plan.addChangeHandler(api.setPublicObjects);var globals={"$":$,activeExperiments:evaluator.getEvaluatedExperimentIds()||[],allExperiments:data.getExperiments(),all_experiments:data.getExperiments(),allVariations:data.getVariations(),data:api.data,getElementsByClassName:document.getElementsByClassName,revision:data.getRevision(),variationIdsMap:api.variationIdsMap,variation_map:api.variationMap,variationMap:api.variationMap,variationNamesMap:api.variationNamesMap};var globalFunctions={};var push=curry(api.push,globalFunctions);extend(globalFunctions,{acknowledgePreviewMode:preview.acknowledge,activate:api.activate,activateGeoDelayedExperiments:api.activateGeoDelayedExperiments,activateSiteCatalyst:integrator.activateSiteCatalyst,addToSegment:segmenter.addToSegment,bindTrackElement:evaluator.bindTrackElementFromApi,bucketUser:api.bucketUser,bucketVisitor:api.bucketUser,clickTaleRecord:integrator.recordClickTale,clickTalePlayback:integrator.playbackClickTale,customTag:api.registerCustomTag,delayDomReadyEval:evaluator.setDelayDomExecute,delayPageviewTracking:api.delayPageviewTracking,disable:api.disable,log:timer.enableLogging,getAccountId:data.getAdminAccountId,getProjectId:data.getProjectId,googleAnalyticsCustomVariableScope:integrator.googleAnalyticsCustomVariableScope,integrationPrefix:integrator.setPrefix,optOut:tracker.optOut,overrideUrl:user.setCurrentUrl,preview:preview.enablePreview,push:push,removeFromAllSegments:segmenter.removeFromAllSegments,removeFromSegment:segmenter.removeFromSegment,sc_activate:integrator.activateSiteCatalyst,sc_svar:integrator.setSiteCatalystSVar,setCookieDomain:cookie.setApiPublicSuffix,skipPageTracking:api.skipPageTracking,optOutThirdPartyCookies:api.optOutThirdPartyCookies,timeout:api.disable,trackEvent:tracker.addLogEventFromAPI,verbose:timer.enableVerboseLogging});extend(globals,globalFunctions);var initialApiCalls=window.optimizely;if(isArrayLike(initialApiCalls)){each(initialApiCalls,function(apiCall){push(apiCall)})}window[GLOBAL]=globals};api.invalidateGeoDelayedExperiments=function(){api.geoDelayedExperiments=[]};api.invalidateGeoDelayedSegments=function(){api.geoDelayedSegments=[]};api.push=function(globalFunctions,apiCall){var arguments_=[];var functionName=apiCall;if(isArrayLike(apiCall)){arguments_=slice((apiCall),1);functionName=apiCall[0]}var function_=globalFunctions[functionName];if(function_){timer.addEvent("API",'Called function "'+functionName+'"');if(functionName!=="acknowledgePreviewMode"){preview.addEvent(functionName,{type:"api"})}function_.apply(null,arguments_)}else{timer.addEvent("API",'Error for unknown function "'+functionName+'"')}timer.flushLogs()};api.registerCustomTag=function(key,value){if(api.isFinalized){timer.addEvent("API","Error: can't add custom tags after Optimizely loads");return}api.customTags=api.customTags||{};if(arguments.length==2){api.customTags[key]=value}else{if(arguments.length==1){$.extend(true,api.customTags,key)}}};api.setPublicObjects=function(){api.variationIdsMap={};api.variationMap={};api.variationNamesMap={};each(plan.getVariationIds(),function(variationId){var experimentId=data.getVariationExperimentId(variationId);api.variationIdsMap[experimentId]=variationId.split(VARIATION_ID_DELIMITER);api.variationMap[experimentId]=data.getVariationIndex(variationId);api.variationNamesMap[experimentId]=data.getVariationName(variationId)});api.updateDataObject();extend(window[GLOBAL],{activeExperiments:evaluator.getEvaluatedExperimentIds(),allExperiments:data.getExperiments(),all_experiments:data.getExperiments(),data:api.data,variationIdsMap:api.variationIdsMap,variationMap:api.variationMap,variationNamesMap:api.variationNamesMap,variation_map:api.variationMap})};api.delayPageviewTracking=function(milliseconds){if(!isNumberLike(milliseconds)){return false}directive.delayPageviewTracking=Number(milliseconds)};api.optOutThirdPartyCookies=function(){directive.optOutThirdPartyCookies=true};api.skipPageTracking=function(){directive.shouldSkipPageTracking=true};api.updateDataObject=function(){api.data={};api.data.experiments={};api.data.sections={};api.data.segments={};api.data.state={};api.data.variations={};api.data.visitor={};api.data.customTags=api.customTags;var experimentIds=data.getExperimentIds();for(var i=0;i<experimentIds.length;i++){var experimentId=experimentIds[i];var experimentInfo={};experimentInfo.code=data.getExperimentCode(experimentId);experimentInfo.name=data.getExperimentName(experimentId);experimentInfo.manual=data.getExperimentManualMode(experimentId);experimentInfo.section_ids=data.getExperimentSectionIds(experimentId);experimentInfo.variation_ids=data.getExperimentVariationIds(experimentId);api.data.experiments[experimentId]=experimentInfo}var segmentIds=data.getSegmentIds();for(var i=0;i<segmentIds.length;i++){var segmentId=segmentIds[i];api.data.segments[segmentId]={name:data.getSegmentName(segmentId)}}var sectionIds=data.getSectionIds();for(var i=0;i<sectionIds.length;i++){var sectionId=sectionIds[i];var sectionInfo={};sectionInfo.name=data.getSectionName(sectionId);sectionInfo.variation_ids=data.getSectionVariationIds(sectionId);api.data.sections[sectionId]=sectionInfo}var variationIds=data.getVariationIds();for(var i=0;i<variationIds.length;i++){var variationId=variationIds[i];var variationInfo={};variationInfo.name=data.getVariationName(variationId);variationInfo.code=data.getVariationCode(variationId);api.data.variations[variationId]=variationInfo}var visitor={};var browser=user.getBrowserId();visitor.browser={ff:"Firefox",ie:"Internet Explorer",safari:"Safari",gc:"Google Chrome",opera:"Opera"}[browser]||"";var locationInfoFromData=user.getLocation();visitor.location={city:locationInfoFromData.city,continent:locationInfoFromData.continent,country:locationInfoFromData.country,region:locationInfoFromData.region};visitor.ip=user.getIP();visitor.params={};var urlParams=query.getAllParameters();urlParams.reverse();for(var i=0,nParams=urlParams.length;i<nParams;i++){visitor.params[urlParams[i][0]]=decodeURIComponent(urlParams[i][1])}visitor.referrer=String(document.referrer);visitor.segments=segmenter.getSegmentTrackingData();visitor.mobile=(user.getMobileId()!=="unknown");visitor.os=user.getOS();api.data.visitor=visitor;var state={};state.activeExperiments=evaluator.getEvaluatedExperimentIds()||[];state.variationIdsMap=api.variationIdsMap;state.variationMap=api.variationMap;state.variationNamesMap=api.variationNamesMap;api.data.state=state};api.data={};api.geoDelayedExperiments=[];api.geoDelayedSegments=[];api.variationIdsMap={};api.variationMap={};api.variationNamesMap={};distributor.distributeAll=function(){var previewingExperimentIds=preview.getPreviewingExperiments();each(data.getExperimentIds(),function(experimentId){if(!evaluator.isInQueue(experimentId)){if(!condition.isReadyToTest(experimentId)){if(!data.getExperimentManualMode(experimentId)){api.addGeoDelayedExperiment(experimentId)}}else{if(condition.passesTests(experimentId,{objectType:"experiment"})){timer.addEvent("Distributor","Going to distribute "+data.getExperimentString(experimentId));var shouldEnqueue=distributor.distributeExperiment(experimentId);var dontEvaluateBecausePreviewingOthers=false;if(previewingExperimentIds.length>0&&!arrayContains(previewingExperimentIds,experimentId)){timer.addEvent("Distributor","Not going to evaluate because of preview mode, for "+data.getExperimentString(experimentId));dontEvaluateBecausePreviewingOthers=true;preview.setReason(experimentId,"it is not being previewed")}if(shouldEnqueue&&!dontEvaluateBecausePreviewingOthers){evaluator.enqueue(experimentId)}}}}})};distributor.distributeExperiment=function(experimentId,forceIgnored){forceIgnored=(forceIgnored===true);var preferredVariation=plan.getVariationId(experimentId);if(preferredVariation&&preferredVariation.length>0){timer.addEvent("Distributor","Not distributing experiment "+experimentId+" (already in plan)");return true}if(forceIgnored||plan.isExperimentIgnored(experimentId)){timer.addEvent("Distributor","Not distributing experiment "+experimentId+" (is ignored)");preview.setReason(experimentId,"it is ignored");return false}var enabledVariationIds=data.getEnabledVariationIds(experimentId);if(enabledVariationIds.length===0){timer.addEvent("Distributor","Permanently ignoring experiment "+experimentId+" (no enabled variations)");preview.setReason(experimentId,"it has no enabled variations");plan.ignoreExperiment(experimentId);return false}else{var ignorePercentage=data.getExperimentIgnorePercentage(experimentId);if(ignorePercentage>getRandomNumber(100)){timer.addEvent("Distributor","Permanently ignoring experiment "+experimentId+"("+ignorePercentage+"% likelihood)");plan.ignoreExperiment(experimentId);return false}else{var variationIds=enabledVariationIds;if(distributor.preferredBucketUserMapping[experimentId]!==undefined){timer.addEvent("Distributor","Taking into account bucketUser variations for experiment "+experimentId);variationIds=distributor.getPotentialPreferredMVTVariations(experimentId)}var randomIndex=distributor.pickRandomVariationIndex(experimentId,variationIds);var variationId=variationIds[randomIndex];timer.addEvent("Distributor","Picked variation "+variationId+" [index "+randomIndex+" of "+enabledVariationIds.length+"]");plan.addVariation(variationId,"distributor",false);return true}}};distributor.pickRandomVariationIndex=function(experimentId,possibleVariationIds){var possibleWeights=[];var variationWeights=data.getExperimentVariationWeights(experimentId);each(possibleVariationIds,function(variationId){possibleWeights.push(variationWeights[variationId])});return chooseWeightedIndex(possibleWeights)};distributor.preferMVTVariation=function(experimentId,variationPartial){var sectionId=data.getExperimentVariationSectionId(experimentId,variationPartial);distributor.preferredBucketUserMapping[experimentId]=distributor.preferredBucketUserMapping[experimentId]||{};distributor.preferredBucketUserMapping[experimentId][sectionId]=variationPartial;timer.addEvent("Distributor","Preferring variation partial "+variationPartial+" of section "+sectionId+" of experiment "+experimentId);var variationIds=distributor.getPotentialPreferredMVTVariations(experimentId);if(variationIds.length===1){plan.addVariation(variationIds[0],"api.bucketUser",false,true)}};distributor.getPotentialPreferredMVTVariations=function(experimentId){var variationIds=[];each(data.getEnabledVariationIds(experimentId),function(variationId){if(distributor.containsPreferredMVTVariations(experimentId,variationId)){variationIds.push(variationId)}});return variationIds};distributor.containsPreferredMVTVariations=function(experimentId,variationId){var isAcceptable=true;for(var sectionId in distributor.preferredBucketUserMapping[experimentId]){var variationPartial=distributor.preferredBucketUserMapping[experimentId][sectionId];if(variationId.indexOf(variationPartial)===-1){isAcceptable=false}}return isAcceptable};distributor.preferredBucketUserMapping={};query.getAllParameters=function(){var queryString=window.location.search||"";if(queryString.indexOf("?")===0){queryString=queryString.substring(1)}var query=queryString.split("&");var nameValuePairs=[];for(var i=0;i<query.length;i++){var name="";var value="";var nameAndValue=query[i].split("=");if(nameAndValue.length>0){name=nameAndValue[0]}if(nameAndValue.length>1){value=nameAndValue[1]}nameValuePairs.push([name,value])}return nameValuePairs};query.getParameters=function(queryString){var match;var queryExpression=/optimizely_([^=]+)=([^&]*)/g;var queryParameters={};while(match=queryExpression.exec(queryString)){queryParameters[match[1]]=decodeURIComponent(match[2])}return queryParameters};query.getValue=function(queryParamName){var allQueryParams=query.getAllParameters();for(var i=0;i<allQueryParams.length;i++){var pair=allQueryParams[i];if(pair[0]===queryParamName){return pair[1]}}return null};query.findVariationId=function(experimentId,variationIndices){var sectionIds=data.getExperimentSectionIds(experimentId);var variationIds=[];if(sectionIds.length===variationIndices.length){each(sectionIds,function(sectionId,index){var variationIndex=variationIndices[index];var variationId=data.getSectionVariationIds(sectionId)[variationIndex];if(variationId){variationIds.push(variationId)}else{variationIds=[];return null}})}else{if(variationIndices.length===1){var experimentVariationIds=data.getExperimentVariationIds(experimentId);var variationIndex=variationIndices[0];var variationId=experimentVariationIds[variationIndex];if(!variationId&&arrayContains(experimentVariationIds,variationIndex)){variationId=variationIndex}if(variationId){variationIds.push(variationId)}}}return variationIds.join(VARIATION_ID_DELIMITER)};query.process=function(){var queryParameters=query.getParameters(window.location.search);var experimentExpression=/x(\d+)/;var hasPreviewParameters=false;each(queryParameters,function(key,value){var match=experimentExpression.exec(key);if(match){hasPreviewParameters=true;var experimentId=match[1];directive.previewExperimentId=experimentId;if(value!=="-1"){var variationIndices=value.split(VARIATION_ID_DELIMITER);var variationId=query.findVariationId(experimentId,variationIndices);var shouldEvaluate=!data.getExperimentManualMode(experimentId);plan.addVariation(variationId,"query",shouldEvaluate);preview.addExperiment(experimentId)}}});if(queryParameters.opt_out==="true"||queryParameters.opt_out==="false"){tracker.optOut(queryParameters.opt_out==="true")}directive.isEnabled=queryParameters.disable!=="true"&&queryParameters.opt_out!=="true"&&cookie.get(OPT_OUT_COOKIE_NAME)!=="true";directive.isEditor=queryParameters.editor==="true";directive.scriptToLoad=queryParameters.load_script;directive.shouldLoadPreview=queryParameters.preview==="true";directive.shouldLog=queryParameters.log==="true";directive.shouldLogVerbosely=queryParameters.verbose==="true";var forceTracking=queryParameters.force_tracking==="true";hasPreviewParameters=hasPreviewParameters||directive.shouldLoadPreview;directive.shouldTrackEvents=!hasPreviewParameters||forceTracking;if(queryParameters.client==="false"){directive.isEnabled=false;directive.scriptToLoad="js/"+data.getProjectId()+".js"}if(directive.scriptToLoad){if(!optly.domain.check(directive.scriptToLoad)){timer.addEvent("Query","Blocked request to load unsafe script: "+directive.scriptToLoad);directive.scriptToLoad=""}}};optly.nativity.getNativeGetElementsByClassName=function(){var nativeGetByClass=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(nativeGetByClass)){var optimizely=window.optimizely||{};var optimizelyGetByClass=optimizely.getElementsByClassName;var optly_=window.optly||{};var optlyGetByClass=optly_.getElementsByClassName;if(optly.nativity.isNativeFunction(optimizelyGetByClass)){nativeGetByClass=optimizelyGetByClass}else{if(optly.nativity.isNativeFunction(optlyGetByClass)){nativeGetByClass=optlyGetByClass}else{nativeGetByClass=null}}}return nativeGetByClass};optly.nativity.isNativeFunction=function(function_){return function_&&String(function_).indexOf("[native code]")!==-1};redirect.getRedirectURL=function(code){var redirectPattern=/_optimizely_redirect(?:_no_cookie)?=(\S+)/;return code.match(redirectPattern)};redirect.detectNoCookieRedirect=function(code){return containsString(code,"_optimizely_redirect_no_cookie")};redirect.okToRedirect=function(code){code=code||"";if(redirect.detectNoCookieRedirect(code)){return true}var redirectCookie=redirect.getRedirectCookie();return !redirectCookie};redirect.getRedirectCookie=function(){return cookie.get(REDIRECT_COOKIE_NAME)};redirect.setRedirectCookie=function(variationId){cookie.set(REDIRECT_COOKIE_NAME,variationId||"unknown variation",REDIRECT_COOKIE_SECONDS)};redirect.setReferrerCookie=function(){cookie.set(REFERRER_REDIRECT_COOKIE_NAME,document.referrer,REDIRECT_COOKIE_SECONDS)};var detect=function(){var browserData=[{id:"gc",substring:"Chrome",versionPrefix:"Chrome"},{id:"safari",string:navigator.vendor,substring:"Apple",versionPrefix:"Version"},{id:"ff",substring:"Firefox",versionPrefix:"Firefox"},{id:"opera",prop:window.opera,versionPrefix:"Opera"},{id:"ie",substring:"MSIE",versionPrefix:"MSIE"}];var mobileData=[{id:"android",substring:"Android"},{id:"blackberry",substring:"BlackBerry"},{id:"ipad",substring:"iPad"},{id:"iphone",substring:"iPhone"},{id:"ipod",substring:"iPod"},{id:"windows phone",substring:"Windows Phone"}];var userAgent=navigator.userAgent;var browserDatum=detect.searchString(browserData,userAgent);var mobileDatum=detect.searchString(mobileData,userAgent);var version=null;var versionPrefix=browserDatum.versionPrefix;if(versionPrefix){version=detect.parseVersion(userAgent,versionPrefix)||detect.parseVersion(navigator.appVersion,versionPrefix)}return{browserId:browserDatum.id||"unknown",browserVersion:version||"unknown",mobileId:mobileDatum.id||"unknown"}};detect.parseVersion=function(versionString,versionPrefix){var index=versionString.indexOf(versionPrefix);var version=null;if(index!==-1){index+=versionPrefix.length+1;version=parseFloat(versionString.substring(index))}return version};detect.searchString=function(data,defaultString){return each(data,function(datum){var string=datum.string||defaultString;if(string&&containsString(string,datum.substring)||datum.prop){return datum}})||{}};directive.delayPageviewTracking=0;directive.isEnabled=true;directive.isEditor=false;directive.optOutThirdPartyCookies=false;directive.previewExperimentId=null;directive.scriptToLoad="";directive.shouldLoadPreview=false;directive.shouldLog=false;directive.shouldLogVerbosely=false;directive.shouldOverrideThirdPartyCookie=false;directive.shouldSkipPageTracking=false;directive.shouldTrackEvents=true;(function(){function f(n){return n<10?"0"+n:n}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}json.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};json.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}());tracker.addLogEventFromAPI=function(name,revenueOrOptions){var options={};var fixedRevenue=undefined;var customRevenueGoals=data.getCustomRevenueGoals();if(customRevenueGoals&&name in customRevenueGoals&&isNumberLike(customRevenueGoals[name])){fixedRevenue=customRevenueGoals[name]}if(revenueOrOptions&&isNumberLike(revenueOrOptions)){options={revenue:Number(revenueOrOptions)}}else{if(revenueOrOptions&&revenueOrOptions.revenue){options={revenue:revenueOrOptions.revenue}}else{if(fixedRevenue){options={revenue:fixedRevenue}}else{options=revenueOrOptions}}}var enabledExperiments=data.getEnabledExperimentIds();var experimentIds={};each(enabledExperiments,function(experimentId){experimentIds[experimentId]=true});$.extend(options,{experimentIds:experimentIds});tracker.addLogEvent(name,"custom",options)};tracker.addLogEvent=function(name,type,options){options=options||{};preview.addEvent(name,options);if(!directive.shouldTrackEvents){return}tracker.logEvents.push({name:name,type:type,options:options});if(tracker.shouldSendLogEvents){tracker.sendLogEvents();timer.addEvent("Tracker","Tracking event '"+name+"'")}else{timer.addEvent("Tracker","Queued tracking event '"+name+"'")}};tracker.enableEngagementTracking=function(){$("html").one("mousedown touchstart",tracker.registerEngagement)};tracker.addPageviewEvent=function(url){var pageview_revenue_goals=data.getPageviewRevenueGoals();if(pageview_revenue_goals&&keys(pageview_revenue_goals)>0){each(keys(pageview_revenue_goals),function(key){tracker.addLogEvent(url,"pageview",{revenue:key,experimentIds:pageview_revenue_goals[key]})})}else{tracker.addLogEvent(url,"pageview")}};tracker.getMatchingGoalIds=function(event){var goals=data.getGoalExpressions();var goal_ids=[];for(var goal_id in goals){if(goals.hasOwnProperty(goal_id)){var expressions=goals[goal_id];$.each(expressions,function(i,expression){try{if(event.match(expression)){goal_ids.push(goal_id);return false}}catch(error){}return true})}}return goal_ids};tracker.getPendingLogEvents=function(){var pendingLogEventCookie=cookie.get(PENDING_LOG_EVENTS_COOKIE_NAME)||"[]";var values=[];try{values=json.parse(pendingLogEventCookie)}catch(e){}if(!isArrayLike(values)){values=[]}else{for(var i=0,nValues=values.length;i<nValues;i++){var value=values[i];if(typeof value!=="string"){values=[];break}else{try{var parsed=json.parse(value);values=[];break}catch(e){}}}}return values};tracker.makeLogRequest=function(query,doneCallback){timer.addEvent("Tracker","Making a log request.");tracker.makeRequest(data.getLogUrlRoot()+"?"+query,doneCallback)};tracker.makeImageRequest=function(fullUrl,doneCallback){var image=new Image();image.onload=doneCallback;fullUrl=tracker.stripXHRFlag(fullUrl);image.src=fullUrl;tracker.images.push(image)};tracker.ONLOAD_FIRED=false;tracker.onloadQueue=[];tracker.makeRequestAfterPageLoad=function(fullUrl,doneCallback){if(!tracker.ONLOAD_FIRED){tracker.onloadQueue.push({fullUrl:fullUrl,doneCallback:doneCallback})}else{$.each(tracker.onloadQueue,function(cnt,QueuedRequest){tracker.makeRequest(QueuedRequest.fullUrl,QueuedRequest.doneCallback)})}};$(window).load(function(){tracker.ONLOAD_FIRED=true;tracker.makeRequestAfterPageLoad()});tracker.makeRequest=function(fullUrl,doneCallback){if(!tracker.ONLOAD_FIRED){tracker.makeRequestAfterPageLoad(fullUrl,doneCallback);return}if(tracker.XHR_SUPPORTED){if(tracker.isXHRQuery(fullUrl)){try{var xhr=new XMLHttpRequest();if("withCredentials" in xhr){xhr.onload=doneCallback;xhr.open("GET",fullUrl,true);xhr.withCredentials=true;xhr.send();return}else{tracker.XHR_SUPPORTED=false;timer.addEvent("Tracker","Found that XHR with credentials is not supported in this browser.")}}catch(err){timer.addEvent("Tracker","XHR not supported");tracker.XHR_SUPPORTED=false}}}tracker.makeImageRequest(fullUrl,doneCallback)};tracker.isXHRQuery=function(query){return query.indexOf(tracker.XHR_FLAG)!==-1};tracker.stripXHRFlag=function(query){return query.replace("&"+tracker.XHR_FLAG,"")};tracker.optOut=function(shouldOptOut){shouldOptOut=(shouldOptOut===true||shouldOptOut==="true");var cookieValue=shouldOptOut?"true":"false";if(shouldOptOut){cookie.set(OPT_OUT_COOKIE_NAME,cookieValue,BUCKET_COOKIE_AGE);cookie.set(BUCKET_COOKIE_NAME,cookieValue,BUCKET_COOKIE_AGE);alert("You have successfully opted out of Optimizely for this domain.")}else{cookie.set(OPT_OUT_COOKIE_NAME,cookieValue,BUCKET_COOKIE_AGE);alert("You are NOT opted out of Optimizely for this domain.")}};tracker.registerEngagement=function(event){tracker.addLogEvent("engagement");$(this).unbind("mousedown touchstart",tracker.registerEngagement)};tracker.removePendingLogEvent=function(event){var pendingEvents=tracker.getPendingLogEvents();for(var i=0,nEvents=pendingEvents.length;i<nEvents;i++){if(pendingEvents[i]===event){pendingEvents.splice(i,1);break}}tracker.setPendingLogEventsCookie(pendingEvents);timer.addEvent("Tracker","Removed a pending log event from the pending events cookie.")};tracker.logEvents=[];tracker.shouldSendLogEvents=false;tracker.sendLogEvents=function(){var queryParameters=["a="+data.getProjectId(),"d="+data.getAdminAccountId(),"y="+data.getIPAnonymization()];if(directive.shouldOverrideThirdPartyCookie){queryParameters.push("override=true")}each(plan.getVariationIds(),function(variationId){var experimentId=data.getVariationExperimentId(variationId);queryParameters.push("x"+experimentId+"="+variationId)});each(segmenter.getSegmentTrackingData(),function(segmentId,segmentValue){queryParameters.push("s"+segmentId+"="+segmentValue)});var queryCommonSubstring=queryParameters.join("&");var individualQuerySubstrings=[];each(tracker.logEvents,function(event){var eventQueryParameters=[];if(event.name){eventQueryParameters.push("n="+encodeURIComponent(event.name));var goal_ids=tracker.getMatchingGoalIds(event.name);if(goal_ids.length>0){eventQueryParameters.push("g="+goal_ids.join(","))}}if(event.options.anonymous!==true){eventQueryParameters.push("u="+user.getId())}if(tracker.XHR_SUPPORTED&&tracker.shouldUseXHR(event)){eventQueryParameters.push(tracker.XHR_FLAG)}eventQueryParameters.push("t="+(+new Date()));if(directive.optOutThirdPartyCookies){eventQueryParameters.push("dtpc="+directive.optOutThirdPartyCookies)}if(event.options&&event.options.revenue){var enabledExperiments=data.getEnabledExperimentIds();var targetedExperiments=event.options.experimentIds;var nonTargetedExperiments=filter(enabledExperiments,function(elem){return !targetedExperiments[elem]});var eventPayload=[];if(nonTargetedExperiments.length>0){eventPayload=eventQueryParameters.concat(["f="+nonTargetedExperiments.join(",")]);individualQuerySubstrings.push(eventPayload.join("&"))}eventQueryParameters.push("v="+encodeURIComponent(event.options.revenue));if(keys(targetedExperiments).length>0){eventPayload=eventQueryParameters.concat(["f="+keys(targetedExperiments).join(",")]);individualQuerySubstrings.push(eventPayload.join("&"))}}else{eventQueryParameters.push("f="+data.getEnabledExperimentIds().join(","));individualQuerySubstrings.push(eventQueryParameters.join("&"))}if(event.type==="custom"){try{tracker.updateCustomEventCookie(event.name)}catch(e){}}});var pendingQueries=individualQuerySubstrings.concat(tracker.getPendingLogEvents());tracker.setPendingLogEventsCookie(pendingQueries);var eventsToSend=tracker.sentPendingLogEvents?individualQuerySubstrings:pendingQueries;tracker.sentPendingLogEvents=true;for(var i=0,nEvents=eventsToSend.length;i<nEvents;i++){var eventQuery=eventsToSend[i];tracker.makeLogRequest(queryCommonSubstring+"&"+eventQuery,function(){tracker.removePendingLogEvent(eventQuery)})}tracker.logEvents=[];tracker.shouldSendLogEvents=true};tracker.sendVerificationRequest=function(){if(!directive.shouldTrackEvents){return}var webHost=data.getWebHost();var fullUrl="//"+webHost+"/account/snippet_installed?project_id="+data.getProjectId()+"&wxhr=true";timer.addEvent("Tracker","Making snippet verification request.");tracker.makeRequest(fullUrl,null)};tracker.setPendingLogEventsCookie=function(events){var value=json.stringify(events);while(value.length>PENDING_LOG_EVENTS_COOKIE_MAX_LENGTH){events=events.slice(0,-1);value=json.stringify(events)}cookie.set(PENDING_LOG_EVENTS_COOKIE_NAME,value,PENDING_LOG_EVENTS_COOKIE_AGE)};tracker.updateCustomEventCookie=function(eventName){var MAX_NUMBER_OF_EVENTS_TRACKED_PER_PROJECT=10;var MAX_NUMBER_OF_PROJECTS_TRACKED_PER_PERSON=10;var userId=user.getId();var customEventCookies=cookie.get(CUSTOM_EVENTS_COOKIE_NAME)||"{}";try{customEventCookies=json.parse(customEventCookies)}catch(e){customEventCookies={}}var eventArray=customEventCookies[userId]||(customEventCookies[userId]=[]);eventArray=(isArrayLike(eventArray)?eventArray:[]);if($.inArray(eventName,eventArray)!==-1){eventArray.splice($.inArray(eventName,eventArray),1);eventArray.push(eventName)}else{eventArray.push(eventName)}if(eventArray.length>MAX_NUMBER_OF_EVENTS_TRACKED_PER_PROJECT){eventArray.shift()}customEventCookies[userId]=eventArray;var numberOfProjects=0;var smallestProjectId=null;var smallestProjectLength=0;for(var myProjectId in customEventCookies){if(customEventCookies.hasOwnProperty(myProjectId)){numberOfProjects++;if(customEventCookies[myProjectId].length>smallestProjectLength&&myProjectId!==userId){smallestProjectId=myProjectId;smallestProjectLength=customEventCookies[myProjectId].length}}}if(numberOfProjects>MAX_NUMBER_OF_PROJECTS_TRACKED_PER_PERSON&&smallestProjectId!==null){delete customEventCookies[smallestProjectId]}cookie.set(CUSTOM_EVENTS_COOKIE_NAME,json.stringify(customEventCookies),BUCKET_COOKIE_AGE)};tracker.shouldUseXHR=function(event){if(document.location.protocol==="https:"&&user.getBrowserId()==="ie"&&user.getBrowserVersion()>=10){return false}return event.type==="pageview"||event.type==="custom"};tracker.images=[];tracker.sentPendingLogEvents=false;tracker.XHR_FLAG="wxhr=true";tracker.XHR_SUPPORTED=true;template.evaluate=function(templateString){templateString=$.trim(templateString);var evaluatedValue="";if(window[GLOBAL]&&window[GLOBAL][GLOBAL_DATA]){var urlParamMatch=templateString.match(template.URL_PARAM_REGEX);if(urlParamMatch){var paramName=urlParamMatch[1];var paramValue=window[GLOBAL][GLOBAL_DATA]["visitor"]["params"][paramName];if(paramValue===undefined){paramValue=""}evaluatedValue=paramValue}else{var path=templateString.split(".");var value=window[GLOBAL];for(var i=0,nComponents=path.length;i<nComponents;i++){value=value[path[i]];if(value===undefined||value===null){value="";break}}evaluatedValue=""+value}}timer.addEvent("Template",templateString+" evaluated to: '"+evaluatedValue+"'");return evaluatedValue};template.render=function(originalCode){return originalCode.replace(template.TEMPLATE_REGEX,template.replacer)};template.replacer=function(matchedSubstring,capturedSubstring){return template.evaluate(capturedSubstring)};template.TEMPLATE_REGEX=/\{\{ *optimizely\.([^\n\r{}<>]*)\}\}/g;template.URL_PARAM_REGEX=/^data\.visitor\.params\.(.*)$/;preview.addEvent=function(event,options){options=options||{};var previewGlobal=window.optimizelyPreview;if(!previewGlobal){previewGlobal=[];window.optimizelyPreview=previewGlobal}if(!preview.hasAddedCurrentUrl){previewGlobal.push(["addEvent",window.location.href,{type:"url"}]);preview.hasAddedCurrentUrl=true}previewGlobal.push(["addEvent",event,options])};preview.acknowledge=function(){timer.addEvent("Preview","Preview acknowledgement received");preview.hasBeenAcknowledged=true};preview.addExperiment=function(experimentId){preview.previewingExperimentIds.push(experimentId)};preview.enablePreview=function(){if(!preview.hasBeenAcknowledged){preview.loadScript()}};preview.getPreviewingExperiments=function(){return preview.previewingExperimentIds};preview.hasCookie=function(){var previewCookie=cookie.get(PREVIEW_COOKIE_NAME||"{}");try{var parsedCookieObject=json.parse(previewCookie);for(var projectId in parsedCookieObject){if(projectId==data.getProjectId()){return true}}}catch(err){return false}return false};preview.initialize=function(){if(directive.shouldLoadPreview){preview.loadScript()}preview.hasRunInitialization=true};preview.loadScript=function(){timer.addEvent("Preview","Will load preview script");var parts=["https://",data.getWebHost(),"/js/preview-",data.getVersion(),".js?account_id=",data.getAdminAccountId()];var previewScriptUrl=parts.join("");timer.addEvent("Preview","Now loading preview script "+previewScriptUrl);loadScript(previewScriptUrl)};preview.setReason=function(objectId,reason){preview.reasons[objectId]=reason};preview.getReason=function(objectId){return preview.reasons[objectId]};preview.deleteReason=function(objectId){delete preview.reasons[objectId]};preview.hasAddedCurrentUrl=false;preview.hasBeenAcknowledged=false;preview.previewingExperimentIds=[];preview.reasons={};var BUCKET_COOKIE_AGE=60*60*24*365*10;var BUCKET_COOKIE_NAME="optimizelyBuckets";var CUSTOM_EVENTS_COOKIE_NAME="optimizelyCustomEvents";var EVALUATION_WAIT_INTERVAL=50;var FIRST_EVALUATION_WAIT_INTERVAL=10;var GLOBAL="optimizely";var GLOBAL_DATA="data";var GEO_CONDITION_WAIT_INTERVAL=1000;var IGNORED_VARIATION_ID="0";var OPT_OUT_COOKIE_NAME="optimizelyOptOut";var PENDING_LOG_EVENTS_COOKIE_AGE=15;var PENDING_LOG_EVENTS_COOKIE_MAX_LENGTH=1536;var PENDING_LOG_EVENTS_COOKIE_NAME="optimizelyPendingLogEvents";var PREVIEW_COOKIE_NAME="optimizelyPreview";var PUBLIC_SUFFIX_COOKIE_AGE=60*60*24*365*10;var PUBLIC_SUFFIX_COOKIE_NAME="optimizelyPublicSuffix";var REDIRECT_COOKIE_SECONDS=5;var REDIRECT_COOKIE_NAME="optimizelyRedirect";var REFERRAL_CHARTBEAT_COOKIE_NAME="optimizelyChartbeat";var REFERRER_REDIRECT_COOKIE_NAME="optimizelyReferrer";var SEGMENTS_COOKIE_AGE=60*60*24*365*10;var SEGMENTS_COOKIE_NAME="optimizelySegments";var SELECTOR_DELIMITER=",";var SOURCE_COOKIE_AGE=3;var SOURCE_COOKIE_DELIMITER="|||";var SOURCE_COOKIE_NAME="sourceCookie";var TEST_MODULE=window.OPTIMIZELY_TEST_MODULE;var TOP_LEVEL_DOMAINS=["com","local","net","org","xxx","edu","es","gov","biz","info","fr","nl","ca","de","kr","it","me","ly","tv","mx","cn","jp","il","in","iq"];var USER_ID_COOKIE_AGE=60*60*24*365*10;var USER_ID_COOKIE_NAME="optimizelyEndUserId";var VARIATION_CODE_DELIMITER="\n";var VARIATION_ID_DELIMITER="_";var VARIATION_URL_DELIMITER=" ";var VARIATION_URL_START="_optimizely_variation_url";var VARIATION_URL_START_RE=/\/\*\s*_optimizely_variation_url( +include="([^"]*)")?( +exclude="([^"]*)")?( +match_type="([^"]*)")?( +include_match_types="([^"]*)")?( +exclude_match_types="([^"]*)")?( +id="([^"]*)")?\s*\*\//;var VARIATION_URL_END="/* _optimizely_variation_url_end */";var VARIATION_URL_END_RE=/\/\*\s*_optimizely_variation_url_end\s*\*\//;ajax.makeCrossDomainRequest=function(url,callback){var callbackName=ajax.generateCallbackName();var document_=document;var head=document_.head||document_.getElementsByTagName("head")[0]||document_.documentElement;var script=document_.createElement("script");window[GLOBAL][callbackName]=callback;script.async="async";script.src=ajax.addCallbackQueryParameter(url,callbackName);head.insertBefore(script,head.firstChild)};ajax.addCallbackQueryParameter=function(url,callbackName){var containsQuery=url.indexOf("?")!==-1;var parts=[url,containsQuery?"&":"?","callback=",GLOBAL,".",callbackName];return parts.join("")};ajax.generateCallbackName=function(){return"callback"+Math.random().toString().replace("0.","")};cookie.get=function(name){var beginning=name+"=";var parts=(document.cookie||"").split(/\s*;\s*/);var values=[];each(parts,function(part){if(part.indexOf(beginning)===0){values.push(decodeURIComponent(part.substr(beginning.length)))}});var valueCount=values.length;if(valueCount>1){log("Cookie","Values found for %s: %s",name,valueCount)}return valueCount===0?null:values[0]};cookie.initialize=function(){var hostname=document.location.hostname;cookie.guessedPublicSuffix=cookie.guessPublicSuffix(hostname);log("Cookie","Guessed public suffix: %s",cookie.guessedPublicSuffix);cookie.publicSuffix=data.getPublicSuffix(hostname);log("Cookie","Public suffix (from data): %s",cookie.publicSuffix);if(cookie.apiPublicSuffix){log("Cookie","Api public suffix (from api): %s",cookie.apiPublicSuffix)}if(!cookie.publicSuffix){cookie.publicSuffix=cookie.get(PUBLIC_SUFFIX_COOKIE_NAME)||"";log("Cookie","Public suffix (from cookie): %s",cookie.publicSuffix)}if(!cookie.apiPublicSuffix&&!cookie.publicSuffix&&data.isRemotePublicSuffixEnabled()){log("Cookie","Making request for public suffix on DOM ready");$(curry(cookie.makePublicSuffixRequest,hostname))}};cookie.set=function(name,value,age){var domain=cookie.apiPublicSuffix||cookie.publicSuffix||cookie.guessedPublicSuffix;var hostname=document.location.hostname;if(!cookie.publicSuffix&&data.isRemotePublicSuffixEnabled()){cookie.queue.push({age:age,name:name,value:value})}if(domain&&domain===cookie.publicSuffix&&domain!==cookie.guessedPublicSuffix){cookie.deleteFromDomain(name,hostname);cookie.deleteFromDomain(name,cookie.guessedPublicSuffix)}cookie.setOnDomain(name,value,domain,age);var cookieValue=cookie.get(name);if(cookieValue===value){log("Cookie","Successful set %s=%s on %s",name,value,domain)}else{log("Cookie","Setting %s on %s apparently failed (%s != %s)",name,domain,cookieValue,value);log("Cookie","Setting %s on %s",name,hostname);cookie.setOnDomain(name,value,hostname,age);cookieValue=cookie.get(name);if(cookieValue===value){log("Cookie","Setting %s on %s worked; saving as new public suffix",name,hostname);cookie.guessedPublicSuffix=hostname}}};cookie.deleteFromDomain=function(name,domain){log("Cookie","Deleting %s on %s",name,domain);var parts=[name,"=","; domain=.",domain,"; path=/","; expires=",new Date(0).toUTCString()];document.cookie=parts.join("")};cookie.guessPublicSuffix=function(hostname){var parts=hostname.split(".");var publicSuffix=hostname;var last=parts[parts.length-1];if(parts.length>2&&parts[parts.length-2]==="appspot"&&last==="com"){publicSuffix=parts[parts.length-3]+".appspot.com"}else{if(parts.length>1&&inArray(last,TOP_LEVEL_DOMAINS)){publicSuffix=parts[parts.length-2]+"."+last}}return publicSuffix};cookie.handlePublicSuffixResponse=function(data){cookie.publicSuffix=data.public_suffix;log("Cookie","Public suffix request returned: %s",cookie.publicSuffix);cookie.set(PUBLIC_SUFFIX_COOKIE_NAME,cookie.publicSuffix,PUBLIC_SUFFIX_COOKIE_AGE);if(cookie.publicSuffix!==cookie.guessedPublicSuffix){while(cookie.queue.length>0){var setArguments=cookie.queue.shift();cookie.set(setArguments.name,setArguments.value,setArguments.age)}}cookie.queue=[]};cookie.makePublicSuffixRequest=function(hostname){var apiUrlRoot=data.getApiUrlRoot();var url=apiUrlRoot+"/iapi/public_suffix?host="+encodeURIComponent(hostname);ajax.makeCrossDomainRequest(url,cookie.handlePublicSuffixResponse)};cookie.setOnDomain=function(name,value,domain,age){var parts=[name,"=",encodeURIComponent(value),"; domain=.",domain,"; path=/"];if(age){var futureDate=new Date(+new Date()+age*1000);parts.push("; expires=",futureDate.toUTCString())}document.cookie=parts.join("")};cookie.setApiPublicSuffix=function(newPublicSuffix){cookie.apiPublicSuffix=String(newPublicSuffix)||"";log("Cookie","Api public suffix set to: %s",cookie.apiPublicSuffix)};cookie.guessedPublicSuffix="";cookie.apiPublicSuffix="";cookie.publicSuffix="";cookie.queue=[];user.getBrowserId=function(){user.detectionResults=user.detectionResults||detect();function get(){return user.detectionResults.browserId}user.getBrowserId=get;return get()};user.getBrowserLanguage=function(){var language="";try{language=navigator.userLanguage||window.navigator["language"];language=language.toLowerCase()}catch(error){language=""}return language};user.getBrowserVersion=function(){user.detectionResults=user.detectionResults||detect();function get(){return user.detectionResults.browserVersion}user.getBrowserVersion=get;return get()};user.getClickEventType=function(){var eventType="mousedown";var mobileType=user.getMobileId();if((mobileType==="iphone"||mobileType==="ipad"||mobileType==="ipod")){eventType="touchstart"}return eventType};user.getCurrentUrl=function(){return user.currentUrl||window.location.href};user.getDomain=function(url){if(!url){return""}try{return url.match(/:\/\/(?:www[0-9]?\.)?(.[^/:]+)/)[1]}catch(err){return""}};user.getReferrer=function(){var cookiedReferrer=cookie.get(REFERRER_REDIRECT_COOKIE_NAME);return cookiedReferrer||document.referrer||""};user.getReferringDomain=function(){var referrer=user.getReferrer();return user.getDomain(referrer)};user.getId=function(){var id=cookie.get(USER_ID_COOKIE_NAME);if(!id){id="oeu"+(+new Date())+"r"+Math.random();cookie.set(USER_ID_COOKIE_NAME,id,USER_ID_COOKIE_AGE)}return id};user.getIP=function(){var clientip="";try{clientip=window.optimizely["data"]["visitor"]["ip"]}catch(error){}if(clientip.toUpperCase()==="N/A"){clientip=""}return clientip};user.getLocation=function(){var rawGeoObject={};try{rawGeoObject=window.optimizely["data"]["visitor"]["location"]}catch(error){}var continent="";var country="";var region="";var city="";try{country=rawGeoObject.country.toUpperCase()||""}catch(error){country=""}try{region=rawGeoObject.region.toUpperCase()||""}catch(error){region=""}if(region==="N/A"){region=""}try{city=rawGeoObject.city.toUpperCase()||""}catch(error){city=""}if(city==="N/A"){city=""}try{continent=rawGeoObject.continent.toUpperCase()||""}catch(error){continent=""}if(continent==="N/A"){continent=""}return{city:city,continent:continent,country:country,region:region}};user.getMobileId=function(){user.detectionResults=user.detectionResults||detect();function get(){return user.detectionResults.mobileId}user.getMobileId=get;return get()};user.getNewVsReturning=function(){return user.isReturningUser?"returning":"new"};user.getOS=function(){var osString=navigator.appVersion||"";var os="";if(osString.indexOf("Win")!==-1){os="Windows"}if(osString.indexOf("Mac")!==-1){os="Mac"}if(osString.indexOf("Linux")!==-1){os="Linux"}return os};user.getSourceType=function(){var referrer=user.getReferrer();if(query.getValue("utm_source")||query.getValue("gclid")){return"campaign"}var SEARCH_TESTS=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","https://(www)?\\.google\\..*?/$","bing\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","yahoo\\.\\w{2,3}(\\.\\w{2,3})?/search","baidu\\.\\w{2,3}(\\.\\w{2,3})?/s?"];for(var i=0;i<SEARCH_TESTS.length;i++){var searchRegExp=SEARCH_TESTS[i];var match=referrer.match(searchRegExp);if(match){return"search"}}if(referrer&&user.getDomain(referrer)!==user.getDomain(user.getCurrentUrl())){return"referral"}return null};user.isBot=function(){var BOT_LIST=["googlebot","yahoo! slurp","bingbot","msnbot"];var userAgent=navigator.userAgent.toLowerCase();for(var i=0;i<BOT_LIST.length;i++){var botSubstring=BOT_LIST[i];if(userAgent.indexOf(botSubstring)!==-1){return true}}return false};user.isMobile=function(){return user.getMobileId()!=="unknown"};user.initialize=function(){var bucketCookie=cookie.get(BUCKET_COOKIE_NAME);user.isReturningUser=(bucketCookie!==undefined&&bucketCookie!==null);if(user.isBot()){directive.shouldTrackEvents=false}};user.setCurrentUrl=function(url){log("User","Setting current URL to %s",url);user.currentUrl=url};user.currentUrl=undefined;user.isReturningUser=undefined;iapi.evaluateSegments=function(){segmenter.reset();segmenter.initialize()};iapi.initialize=function(){window[GLOBAL]["iapi"]={evaluateSegments:iapi.evaluateSegments}};evaluator.bindTrackElementFromApi=function(elementSelector,eventName){if(!elementSelector||!eventName){return}if(evaluator.isDocumentReady){timer.addEvent("Evaluator","Bound event "+eventName+" to selector "+elementSelector);evaluator.bindTrackElement(elementSelector,eventName)}else{var step={eventName:eventName,selector:elementSelector,type:"event '"+eventName+"' (click goal)",waitUntilSelectorReady:true};timer.addEvent("Evaluator","Add step to bind event "+step.eventName+" to selector "+step.selector);evaluator.steps.push(step)}};evaluator.evaluate=function(experimentIds,activatedExperimentIds){if(!directive.isEnabled){return}if(!isArrayLike(experimentIds)){experimentIds=[];evaluator.tellPreviewAboutExperiments(activatedExperimentIds)}else{evaluator.tellPreviewAboutExperiments(experimentIds)}experimentIds=experimentIds.concat(evaluator.evaluateQueue);evaluator.evaluateQueue=[];for(var i=0;i<experimentIds.length;i++){if(!arrayContains(evaluator.evaluatedExperimentIds,experimentIds[i])){evaluator.evaluatedExperimentIds.push(experimentIds[i])}}var newSteps=plan.getSteps(experimentIds);appendArray(evaluator.steps,newSteps);evaluator.doSteps()};evaluator.doSteps=function(){var shouldWait=false;evaluator.timeoutId=null;timer.addEvent("Evaluator",evaluator.waitCount+" times waited");while(!shouldWait&&evaluator.steps.length>0){timer.addEvent("Evaluator",evaluator.steps.length+" steps remaining");var step=evaluator.steps.shift();shouldWait=evaluator.shouldWaitBeforeStep(step);if(shouldWait){evaluator.steps.unshift(step)}else{if(step.eventName){timer.addEvent("Evaluator","Bound event "+step.eventName+" to selector "+step.selector);var options={};if(step.revenue){options={revenue:step.revenue,experimentIds:step.experimentIds}}evaluator.bindTrackElement(step.selector,step.eventName,options)}else{if(step.code){timer.addEvent("Evaluator","Run code: "+step.code);evaluator.evaluateCode(step.code,step.variationId)}}}}if(shouldWait){var waitInterval=evaluator.waitCount===0?FIRST_EVALUATION_WAIT_INTERVAL:EVALUATION_WAIT_INTERVAL;evaluator.timeoutId=setTimeout(evaluator.doSteps,waitInterval);evaluator.waitCount++}else{timer.addEvent("Evaluator",evaluator.waitCount+" total times waited")}};evaluator.enqueue=function(experimentId){evaluator.evaluateQueue=evaluator.evaluateQueue||[];evaluator.evaluateQueue.push(experimentId)};evaluator.getActiveExperimentIds=function(){return evaluator.evaluatedExperimentIds.concat(evaluator.evaluateQueue)};evaluator.getEvaluatedExperimentIds=function(){return evaluator.evaluatedExperimentIds};evaluator.isInQueue=function(experimentId){return inArray(experimentId,evaluator.evaluateQueue)};evaluator.evaluateCode=function(code,variationId){code=template.render(code);if(redirect.getRedirectURL(code)){timer.addEvent("Evaluator","Redirect detected");if(redirect.okToRedirect(code)){timer.addEvent("Evaluator","OK to redirect");if(!redirect.detectNoCookieRedirect(code)){timer.addEvent("Evaluator","setting a redirect cookie"+(variationId?" for variation: "+variationId:""));redirect.setRedirectCookie(variationId)}redirect.setReferrerCookie()}else{timer.addEvent("Evaluator","NOT OK to redirect");return}}eval("var $j = $;");try{eval(code)}catch(exception){var shouldLog=directive.shouldLog;directive.shouldLog=true;timer.addEvent("Evaluator","Error: "+exception.message);timer.addEvent("Evaluator","Code: "+code);directive.shouldLog=shouldLog;timer.addEvent("Evaluator","Failed to run code: "+exception.message)}};evaluator.bindTrackElement=function(elementSelector,eventName,options){options=options||{};if(evaluator.alreadyBoundClickTrackingEvents[elementSelector]){if(evaluator.alreadyBoundClickTrackingEvents[elementSelector][eventName]){return}}var eventType=user.getClickEventType();var handler=function(){tracker.addLogEvent(eventName,"custom",options)};var elem=$(elementSelector);if(elem.length>0){$(elementSelector).bind(eventType,handler)}else{$(document).delegate(elementSelector,eventType,handler)}if(!evaluator.alreadyBoundClickTrackingEvents[elementSelector]){evaluator.alreadyBoundClickTrackingEvents[elementSelector]={}}evaluator.alreadyBoundClickTrackingEvents[elementSelector][eventName]=eventType};evaluator.handleDocumentReady=function(code){evaluator.isDocumentReady=true;if(evaluator.timeoutId!==null){timer.addEvent("Evaluator","Document is ready");clearTimeout(evaluator.timeoutId);if(evaluator.delayDomExecuteMilliseconds>0){setTimeout(evaluator.doSteps,evaluator.delayDomExecuteMilliseconds)}else{evaluator.doSteps()}}};evaluator.setDelayDomExecute=function(delay){evaluator.delayDomExecuteMilliseconds=delay};evaluator.shouldWaitBeforeStep=function(step){var shouldWait=false;if(step.waitUntilDocumentReady&&!evaluator.isDocumentReady){timer.addEvent("Evaluator","Document not ready yet");shouldWait=true}else{if(step.waitUntilSelectorReady&&!evaluator.isDocumentReady){var selectors=step.selector;if(selectors){selectors=isArrayLike(selectors)?selectors:[selectors];for(var i=0;i<selectors.length;i++){var selector=selectors[i];if(selector===null||selector===undefined||!selector.length){continue}var selection=$(selector);if(selection.length===0){timer.addEvent("Evaluator","'"+selector+"' not found");shouldWait=true}}}}}return shouldWait};evaluator.tellPreviewAboutExperiments=function(experimentIds){if(!experimentIds){experimentIds=data.getExperimentIds()}for(var i=0;i<experimentIds.length;i++){var experimentId=experimentIds[i];var reason=preview.getReason(experimentId);if(reason){preview.addEvent("Not activating "+data.getExperimentString(experimentId)+" because "+reason+".",{type:"explanation"});preview.deleteReason(experimentId)}else{preview.addEvent("Activating "+data.getExperimentString(experimentId)+".",{type:"activation",experimentId:experimentId})}}};evaluator.alreadyBoundClickTrackingEvents={};evaluator.evaluatedExperimentIds=[];evaluator.evaluateQueue=evaluator.evaluateQueue||[];evaluator.delayDomExecuteMilliseconds=0;evaluator.isDocumentReady=false;evaluator.steps=[];evaluator.timeoutId=null;evaluator.waitCount=0;$(evaluator.handleDocumentReady);data.getAdminAccountId=function(){return data.getProperty("admin_account_id")};data.getApiUrlRoot=function(){return data.getUrlRoot("api_host")};data.getClickGoals=function(){if(!data.clickGoalsWithSeparatedSelectors){var clickGoals=data.getProperty("click_goals")||[];data.clickGoalsWithSeparatedSelectors=[];for(var i=0,nClickGoals=clickGoals.length;i<nClickGoals;i++){var goal=clickGoals[i];var selectors=goal.selector.split(SELECTOR_DELIMITER);for(var j=0,nSelectors=selectors.length;j<nSelectors;j++){var selector=selectors[j];if(selector){var goalData={event_name:goal.event_name,selector:selector};if("experiments" in goal){goalData.experiments=goal.experiments}else{if("url_conditions" in goal){goalData.url_conditions=goal.url_conditions}}if("revenue" in goal){goalData.revenue=goal.revenue}data.clickGoalsWithSeparatedSelectors.push(goalData)}}}}return data.clickGoalsWithSeparatedSelectors};data.getConditions=function(objectId,objectType){switch(objectType){case"experiment":return data.getExperimentConditions(objectId);case"segment":return data.getSegmentConditions(objectId);default:return[]}};data.getCustomRevenueGoals=function(){return data.getProperty("custom_revenue_goals")};data.getEnabledExperimentIds=function(){var enabledExperimentIds=filter(data.getExperimentIds(),data.isExperimentEnabled);data.getEnabledExperimentIds=function(){return enabledExperimentIds};return enabledExperimentIds};data.getEnabledVariationIds=function(experimentId){return data.getExperimentProperty(experimentId,"enabled_variation_ids")||[]};data.getExperimentCode=function(experimentId){return data.getExperimentProperty(experimentId,"code")||""};data.getExperimentConditions=function(experimentId){return data.getExperimentProperty(experimentId,"conditions")||[]};data.getGoalExpressions=function(){return data.getProperty("goal_expressions")};data.getProjectClickGoalsWithCustomTargeting=function(){var projectClickGoalsWithCustomTargeting=filter(data.getClickGoals(),function(goal){if(goal.experiments){return false}return condition.testUrls(goal.url_conditions||[])});return projectClickGoalsWithCustomTargeting};data.getSegmentIdByIdentifier=function(segmentIdentifier){var segments=data.getSegments();for(var segmentId in segments){if(Object.prototype.hasOwnProperty.call(segments,segmentId)){var segment=segments[segmentId];if(segment&&segment.api_name===segmentIdentifier){return String(segmentId)}}}return null};data.getSegmentAPIOnly=function(segmentId){return data.getSegmentProperty(segmentId,"is_api_only")||false};data.getSegmentConditions=function(segmentId){return data.getSegmentProperty(segmentId,"add_condition")||[]};data.getSegmentIdentifier=function(segmentId){return data.getSegmentProperty(segmentId,"api_name")||""};data.getSegmentName=function(segmentId){return data.getSegmentProperty(segmentId,"name")||""};data.getSegmentValueType=function(segmentId){return data.getSegmentProperty(segmentId,"segment_value_type")||""};data.getUrlConditions=function(experimentId){var conditions=data.getExperimentConditions(experimentId);var urlConditions=[];each(conditions,function(condition){if(condition.type==="url"){urlConditions.push(conditions)}});return urlConditions};data.getExperimentCss=function(experimentId){return data.getExperimentProperty(experimentId,"css")||""};data.getExperimentEvents=function(experimentId){var eventData={};var dashboardClickGoals=data.getExperimentProperty(experimentId,"events")||{};each(dashboardClickGoals,function(selector,eventName){eventData[selector]=[eventName]});var projectClickGoalsTrackingThisExperiment=filter(data.getClickGoals(),function(goal){if("experiments" in goal){return experimentId in goal.experiments}return false});for(var i=0;i<projectClickGoalsTrackingThisExperiment.length;i++){var goal=projectClickGoalsTrackingThisExperiment[i];if(!eventData[goal.selector]){eventData[goal.selector]=[]}eventData[goal.selector].push({eventName:goal.event_name,revenue:goal.revenue,experimentIds:goal.experiments})}return eventData};data.getExperiments=function(){return data.getProperty("experiments")||{}};data.getExperimentIds=function(){return keys(data.getProperty("experiments")||{})};data.getExperimentIgnorePercentage=function(experimentId){return data.getExperimentProperty(experimentId,"ignore")||0};data.getExperimentManualMode=function(experimentId){return data.getExperimentProperty(experimentId,"manual")||false};data.getExperimentName=function(experimentId){return data.getExperimentProperty(experimentId,"name")||""};data.getExperimentString=function(experimentId){var experimentName=data.getExperimentProperty(experimentId,"name")||"";return'experiment "'+experimentName+'" ('+experimentId+")"};data.getExperimentSectionIds=function(experimentId){return data.getExperimentProperty(experimentId,"section_ids")||[]};data.getExperimentVariationIds=function(experimentId){return data.getExperimentProperty(experimentId,"variation_ids")||[]};data.getExperimentVariationWeights=function(experimentId){return data.getExperimentProperty(experimentId,"variation_weights")||{}};data.getGoogleAnalyticsSlot=function(experimentId){var googleAnalytics=data.getGoogleAnalyticsProperty(experimentId);var slot=0;if(isDefined(googleAnalytics)){slot=googleAnalytics.slot||slot}return slot};data.getGoogleAnalyticsTracker=function(experimentId){var googleAnalytics=data.getGoogleAnalyticsProperty(experimentId);var tracker="";if(isDefined(googleAnalytics)){tracker=googleAnalytics.tracker||tracker}return tracker};data.getIPAnonymization=function(){return !!data.getProperty("ip_anonymization")};data.getLogUrlRoot=function(){return data.getUrlRoot("log_host",false,data.getProjectId())+"/event"};data.getPageviewRevenueGoals=function(){return data.getProperty("pageview_revenue_goals")};data.getProjectId=function(){return data.getProperty("project_id")};data.getRevision=function(){return data.getProperty("revision")};data.getSectionIds=function(){return keys(data.getProperty("sections")||{})};data.getSegments=function(){return data.getProperty("segments")||{}};data.getSegmentIds=function(){return keys(data.getProperty("segments")||{})};data.getExperimentVariationSectionId=function(experimentId,variationPartial){var sectionIds=data.getExperimentSectionIds(experimentId);for(var i=0;i<sectionIds.length;i++){var variationIds=data.getSectionVariationIds(sectionIds[i]);if(arrayContains(variationIds,variationPartial)){return sectionIds[i]}}return""};data.getPublicSuffix=function(domain){var domainToPublicSuffix={};var publicSuffixes=data.getProperty("public_suffixes")||{};each(publicSuffixes,function(publicSuffix,domains){each(domains,function(domain){domainToPublicSuffix[domain]=publicSuffix})});data.getPublicSuffix=function(domain){return domainToPublicSuffix[domain]||""};return data.getPublicSuffix.call(null,domain)};data.getSectionName=function(sectionId){return data.getSectionProperty(sectionId,"name")||""};data.getSectionVariationIds=function(sectionId){return data.getSectionProperty(sectionId,"variation_ids")||[]};data.getSiteCatalystEVar=function(experimentId){return data.getExperimentProperty(experimentId,"site_catalyst_evar")||null};data.getSiteCatalystProp=function(experimentId){return data.getExperimentProperty(experimentId,"site_catalyst_prop")||null};data.getVariations=function(){return data.getProperty("variations")||{}};data.getVariationIds=function(){return keys(data.getProperty("variations")||{})};data.getVariationCode=function(variationId){var codes=[];var variationIds=variationId.split(VARIATION_ID_DELIMITER);each(variationIds,function(variationId){var code=data.getVariationProperty(variationId,"code");if(code){codes.push(code)}});return codes.join("\n")};data.getVariationExperimentId=function(variationId){var experimentIds={};each(data.getExperimentIds(),function(experimentId){each(data.getExperimentSectionIds(experimentId),function(sectionId){each(data.getSectionVariationIds(sectionId),function(variationId){experimentIds[variationId]=experimentId})});each(data.getExperimentVariationIds(experimentId),function(variationId){experimentIds[variationId]=experimentId})});data.getVariationExperimentId=function(variationId){var variationIds=variationId.split(VARIATION_ID_DELIMITER);return experimentIds[variationIds[0]]||""};return data.getVariationExperimentId.call(null,variationId)};data.getVariationIdByIndex=function(experimentId,variationIndex){var variationIds=data.getExperimentVariationIds(experimentId);var variationId=null;try{variationId=variationIds[variationIndex]}catch(e){}return variationId};data.getVariationIndex=function(variationId){var experimentId=data.getVariationExperimentId(variationId);var sectionIds=data.getExperimentSectionIds(experimentId);if(sectionIds.length===0){var expVariationIds=data.getExperimentVariationIds(experimentId);for(var i=0;i<expVariationIds.length;i++){if(expVariationIds[i]===variationId){return i}}}else{var variationIdSplit=variationId.split(VARIATION_ID_DELIMITER);var variationsBySection=[];for(var j=0;j<sectionIds.length;j++){var sectionId=sectionIds[j];var sectionVariationIds=data.getSectionVariationIds(sectionId);for(var k=0;k<sectionVariationIds.length;k++){var thisVariationId=sectionVariationIds[k];if(thisVariationId===variationIdSplit[j]){variationsBySection.push(k)}}}if(variationsBySection!==[]){return variationsBySection}}return -1};data.getVariationName=function(variationId,separator){separator=separator||", ";var namesArray=data.getVariationNamesArray(variationId);return namesArray.join(separator)};data.getVariationNamesArray=function(variationId){var names=[];var variationIds=variationId.split(VARIATION_ID_DELIMITER);each(variationIds,function(variationId){names.push(data.getVariationProperty(variationId,"name")||"Unnamed")});return names};data.getVariationSectionId=function(variationId){var sectionIds={};each(data.getSectionIds(),function(sectionId){each(data.getSectionVariationIds(sectionId),function(variationId){sectionIds[variationId]=sectionId})});data.getVariationSectionId=function(variationId){var variationIds=variationId.split(VARIATION_ID_DELIMITER);return sectionIds[variationIds[0]]||""};return data.getVariationSectionId.call(null,variationId)};data.getVersion=function(){return data.getProperty("version")};data.getWebHost=function(){return data.getProperty("www_host")};data.isExperimentEnabled=function(experimentId){return !!data.getExperimentProperty(experimentId,"enabled")};data.isBlueKaiEnabled=function(){return !!data.getBlueKaiProperty()};data.isChartbeatEnabled=function(experimentId){return !!data.getChartbeatProperty(experimentId)};data.isClickTaleEnabled=function(experimentId){return !!data.getClickTaleProperty(experimentId)};data.isCrazyEggEnabled=function(experimentId){return !!data.getCrazyEggProperty(experimentId)};data.isGeotargetingEnabled=function(experimentOrSegmentId){return !!data.getGeotargetingProperty(experimentOrSegmentId)};data.isGoogleAnalyticsEnabled=function(experimentId){return !!data.getGoogleAnalyticsProperty(experimentId)};data.isInstallationVerified=function(){return !!data.getProperty("installation_verified")};data.isKissMetricsEnabled=function(){return !!data.getProperty("kissmetrics")};data.isMixpanelEnabled=function(experimentId){return !!data.getMixpanelProperty(experimentId)};data.isRemotePublicSuffixEnabled=function(){return !!data.getProperty("remote_public_suffix")};data.isStagingLogEnabled=function(){return !!data.getProperty("use_staging_log")};data.getExperimentProperty=function(experimentId,propertyName){return data.getProperty("experiments",experimentId,propertyName)};data.getBlueKaiProperty=function(){return data.getProperty("bluekai")};data.getChartbeatProperty=function(experimentId){return data.getExperimentProperty(experimentId,"chartbeat")};data.getClickTaleProperty=function(experimentId){return data.getExperimentProperty(experimentId,"clicktale")};data.getCrazyEggProperty=function(experimentId){return data.getExperimentProperty(experimentId,"crazyegg")};data.getGeotargetingProperty=function(experimentOrSegmentId){var property="uses_geotargeting";return data.getExperimentProperty(experimentOrSegmentId,property)||data.getSegmentProperty(experimentOrSegmentId,property)};data.getGoogleAnalyticsProperty=function(experimentId){return data.getExperimentProperty(experimentId,"google_analytics")};data.getMixpanelProperty=function(experimentId){return data.getExperimentProperty(experimentId,"mixpanel")};data.getProperty=function(variableArguments){var object=DATA;var result=each(arguments,function(key){var value=object[key];if(isDefined(value)){object=value}else{return null}});if(result!==null){return object}};data.getSectionProperty=function(sectionId,propertyName){return data.getProperty("sections",sectionId,propertyName)};data.getSegmentProperty=function(segmentId,propertyName){return data.getProperty("segments",segmentId,propertyName)};data.getUrlRoot=function(key,secure,subdomain){var host=data.getProperty(key);if(subdomain){host=subdomain.toString()+"."+host}var protocol=document.location.protocol;if(protocol==="chrome-extension:"){protocol="http:"}if(secure){protocol="https:"}return protocol+"//"+host};data.getVariationProperty=function(variationId,propertyName){return data.getProperty("variations",variationId,propertyName)};data.clickGoalsWithSeparatedSelectors=null;condition.isReadyToTest=function(experimentOrSegmentId){var readyToTest=false;var usesGeotargeting=data.isGeotargetingEnabled(experimentOrSegmentId);if(usesGeotargeting){try{var locationObj=window.optimizely["data"]["visitor"]["location"];if(keys(locationObj)>0&&(locationObj.continent!==""||locationObj.country!==""||locationObj.region!==""||locationObj.city!=="")){readyToTest=true}}catch(error){}}else{readyToTest=true}if(!readyToTest){timer.addEvent("Condition","Not ready to test (geotargeting): "+experimentOrSegmentId)}return readyToTest};condition.passesTests=function(objectId,options){var manualMode=options.manualMode===true;var objectType=options.objectType?options.objectType:"experiment";var isExperiment=objectType==="experiment";var defaultFail=options.defaultFail===true;timer.addEvent("Condition","Testing "+objectType+" "+objectId);var isEnabled=isExperiment&&data.isExperimentEnabled(objectId);var isManualExperiment=isExperiment&&data.getExperimentManualMode(objectId);var conditions=data.getConditions(objectId,objectType);if(isExperiment&&!isEnabled&&directive.previewExperimentId!==objectId){timer.addEvent("Condition","Failed for "+objectType+" "+objectId+" (paused)");preview.setReason(objectId,"it is paused");return false}else{if(isExperiment&&!manualMode&&isManualExperiment){timer.addEvent("Condition"," Failed for "+objectType+" "+objectId+" (manual activation mode)");preview.setReason(objectId,"it is set to use manual activation mode");return false}else{if(!condition.test(conditions,objectId,objectType,defaultFail)){timer.addEvent("Condition","Failed for "+objectType+" "+objectId+" (condition failed)");return false}}}return true};condition.test=function(conditions,objectId,objectType,defaultFail){objectType=objectType||"experiment";var isExperiment=objectType==="experiment";var succeeded=true;if(defaultFail){succeeded=false}var testFunctions=condition.testFunctions;each(conditions,function(condition){var type=condition.type;if(isExperiment&&condition.only_first_time&&plan.containsExperiment(objectId)){timer.addEvent("Condition",type+" condition passed because it only gets checked when bucketing",true)}else{var test=testFunctions[type];var shouldPass=!condition.not;var passed=test(condition);var isUnacceptable=(passed!==shouldPass);var passVerb=passed?"passed":"failed";var shouldPassVerb=shouldPass?"pass":"fail";var verboseReason="the visitor "+passVerb+" a "+type+" targeting condition  when it needed to "+shouldPassVerb;timer.addEvent("Condition","Found that "+verboseReason,!isUnacceptable);if(isUnacceptable){succeeded=false;preview.setReason(objectId,verboseReason);return false}}});return succeeded};condition.testBrowsers=function(condition){var browserId=user.getBrowserId();var browserVersion=user.getBrowserVersion();var passed=false;var mobileId=user.getMobileId();each(condition.values,function(targetedBrowser){if(mobileId!=="unknown"){passed=targetedBrowser==="mobile"||targetedBrowser===mobileId;timer.addEvent("Condition",mobileId,true)}else{if(targetedBrowser.indexOf(browserId)===0){var version=targetedBrowser.substr(browserId.length);passed=version===""||(version<=browserVersion&&browserVersion<Number(version)+1)}}if(passed){return null}});return passed};condition.testCode=function(condition){var code=condition.value;if(code===undefined){return true}try{return Boolean(eval(code))}catch(error){return false}};condition.testCookies=function(condition){var matchesAny=false;var names=condition.names||[];var values=condition.values||[];for(var i=0;i<names.length;i++){var cookieValue=cookie.get(names[i]);if(isDefined(values[i])&&trim(values[i])!==""){matchesAny=matchesAny||(values[i]===cookieValue)}else{matchesAny=matchesAny||(cookieValue!==null&&cookieValue!==undefined)}if(matchesAny){return true}}return false};condition.testCustomTags=function(tagCondition){if(!api.customTags){return false}var tags=tagCondition.values;for(var i=0;i<tags.length;i++){var key=tags[i]["key"],value=tags[i]["value"];if(value===undefined){return Object.prototype.hasOwnProperty.call(api.customTags,key)}else{if(String(api.customTags[key])==value){return true}}}return false};condition.testEvents=function(condition){var customEventCookies=cookie.get(CUSTOM_EVENTS_COOKIE_NAME)||"{}";try{customEventCookies=json.parse(customEventCookies)}catch(e){customEventCookies={}}var triggeredCustomEvents=customEventCookies[user.getId()]||[];if(!isArrayLike(triggeredCustomEvents)){triggeredCustomEvents=[]}var passed=false;each(condition.values,function(eventName){if($.inArray(eventName,triggeredCustomEvents)!==-1){passed=true;return true}});return passed};condition.testIPs=function(condition){var userIp=user.getIP();for(var i=0;i<condition.values.length;i++){var value=condition.values[i];var matchString=value.value;var type=value.match;switch(type){case"exact":if(userIp==matchString&&userIp!=""){return true}break;case"prefix":if(userIp.indexOf(matchString)==0){return true}break;case"regex":try{var regex=RegExp(matchString)}catch(error){return false}if(regex.test(userIp)){return true}break}}return false};condition.testLanguages=function(condition){var browserLanguage=user.getBrowserLanguage();var passed=false;each(condition.values,function(language){passed=language==="any"||browserLanguage.indexOf(language)===0;if(passed){return null}});return passed};condition.testLocations=function(condition){var userLocation=user.getLocation();for(var i=0;i<condition.values.length;i++){var locSplit=condition.values[i].split("|");var country=$.trim(locSplit[0]);var region=$.trim(locSplit[1]);var city=$.trim(locSplit[2]);var continent=$.trim(locSplit[3]);switch(locSplit.length){case 1:if(userLocation.country===country){return true}break;case 2:if(userLocation.region===region&&userLocation.country===country){return true}break;case 3:if(userLocation.city===city&&(userLocation.region===region||""===region)&&userLocation.country===country){return true}break;case 4:if(userLocation.continent===continent){return true}break}}return false};condition.testQueries=function(condition){if(condition.values.length===0){return true}var shouldReturn=false;var queryNameValuePairs=query.getAllParameters();each(condition.values,function(value){var queryKey=value.key;var queryValue=value.value||"";for(var i=0;i<queryNameValuePairs.length;i++){var pair=queryNameValuePairs[i];var pairKey=pair[0];var pairValue=pair[1];if(queryKey!==""&&queryKey===pairKey){if(queryValue===""||queryValue===pairValue){shouldReturn=true;return shouldReturn}}}});return shouldReturn};condition.testReferrers=function(condition){var url=document.referrer;for(var i=0;i<condition.values.length;i++){var value=condition.values[i];var string=value.value;var type=value.match;var matched=optly.match.matchUrl(url,string,type);timer.addEvent("Condition","Testing referrer "+url+" against  "+string+" ("+type+")",true);if(matched){return true}}return false};condition.testSegments=function(condition){var passed=false;var segmentsList=segmenter.getSegmentsList();each(condition.values,function(targetSegmentId){if(arrayContains(segmentsList,targetSegmentId)){passed=true}});return passed};condition.testUrls=function(condition){var url=user.getCurrentUrl();for(var i=0;i<condition.values.length;i++){var value=condition.values[i];var string=value.value;var type=value.match;var matched=optly.match.matchUrl(url,string,type);timer.addEvent("Condition","Testing URL "+url+" against  "+string+" ("+type+")",true);if(matched){return true}}return false};condition.testVisitor=function(condition){var conditionType=condition.value;var newVsReturning=user.getNewVsReturning();switch(conditionType){case"new":if(newVsReturning==="returning"){return false}return true;case"returning":return newVsReturning==="returning"}return true};condition.testFunctions={browser:condition.testBrowsers,code:condition.testCode,cookies:condition.testCookies,custom_tag:condition.testCustomTags,event:condition.testEvents,ip:condition.testIPs,language:condition.testLanguages,location:condition.testLocations,query:condition.testQueries,referrer:condition.testReferrers,segment:condition.testSegments,url:condition.testUrls,visitor:condition.testVisitor};segmenter.initialize=function(){segmenter.loadSegmentsCookie();segmenter.evaluateSegments();segmenter.addChangeHandler(segmenter.saveSegmentsCookie);segmenter.callChangeHandlers();integrator.loadThirdPartySegments()};segmenter.loadSegmentsCookie=function(){timer.addEvent("Segmenter","Loading segments cookie.");var segmentsFromCookie=cookie.get(SEGMENTS_COOKIE_NAME);if(!segmentsFromCookie){return}try{segmentsFromCookie=(json.parse(segmentsFromCookie))}catch(e){segmentsFromCookie={}}each(segmentsFromCookie,function(id,value){timer.addEvent("Segmenter","Segments cookie contains segment id: "+id);segmenter.visitorSegments[id]=value})};segmenter.saveSegmentsCookie=function(){var prunedSegments={};each(segmenter.visitorSegments,function(id,value){if(value){prunedSegments[id]=value}});cookie.set(SEGMENTS_COOKIE_NAME,json.stringify(prunedSegments),SEGMENTS_COOKIE_AGE)};segmenter.addChangeHandler=function(subscriber){segmenter.changeHandlers.push(subscriber)};segmenter.addToSegment=function(segmentIdOrAPIName,segmentValue){var segmentId=data.getSegmentIdByIdentifier(segmentIdOrAPIName)||segmentIdOrAPIName;if(segmentId&&!isNaN(parseInt(segmentId,10))){if(!segmentValue&&segmentValue!==""){segmentValue=true}segmenter.visitorSegments[segmentId]=segmentValue;segmenter.callChangeHandlers()}else{timer.addEvent("Segmenter","Unable to find segment for ID: "+segmentId)}};segmenter.callChangeHandlers=function(){each(segmenter.changeHandlers,function(changeHandler){changeHandler()})};segmenter.evaluateSegment=function(segmentId){timer.addEvent("Segmenter","Evaluating Segment "+segmentId);var addPasses=condition.passesTests(segmentId,{objectType:"segment"});segmenter.tellPreviewAboutSegment(segmentId,"add");if(addPasses){var segmentValue=segmenter.evaluateSegmentValue(segmentId);if(segmentValue!==null){segmenter.addToSegment(segmentId,segmentValue)}}return{addPasses:addPasses,segmentValue:segmentValue}};segmenter.evaluateSegments=function(){timer.addEvent("Segmenter","Evaluating all segments.");var segmentIds=data.getSegmentIds();for(var i=0;i<segmentIds.length;i++){var segmentId=segmentIds[i];if(data.getSegmentAPIOnly(segmentId)){timer.addEvent("Segmenter","Not doing anything since segment "+segmentId+" is api only.")}else{timer.addEvent("Segmenter","Testing whether to add to segment "+segmentId);if(condition.isReadyToTest(segmentId)){segmenter.evaluateSegment(segmentId)}else{api.addGeoDelayedSegment(segmentId)}}}};segmenter.evaluateSegmentValue=function(segmentId){var segmentValueType=data.getSegmentValueType(segmentId);var val=null,fallbackVal=null;switch(segmentValueType){case"browser":val=user.getBrowserId();fallbackVal="unknown";break;case"campaign":val=query.getValue("utm_campaign");fallbackVal="none";break;case"country":val=user.getLocation()["country"];fallbackVal="unknown";break;case"language":val=user.getBrowserLanguage();fallbackVal="none";break;case"mobile":val=user.isMobile();break;case"os":val=user.getOS();fallbackVal="unknown";break;case"referrer":val=user.getReferringDomain();fallbackVal="none";break;case"source_type":val=user.getSourceType();fallbackVal="direct";break;default:return"true"}if(val===null){if(!segmenter.visitorSegments.hasOwnProperty(segmentId)){val=fallbackVal}else{return null}}return segmenter.standardizeValue(val)};segmenter.getSegmentsList=function(){var segmentsList=[];each(segmenter.visitorSegments,function(segmentId,segmentValue){if(segmentValue){segmentsList.push(segmentId)}});return segmentsList};segmenter.getSegmentTrackingData=function(){var segmentsTrackingData={};each(segmenter.visitorSegments,function(segmentId,segmentValue){if(segmentValue){segmentsTrackingData[String(segmentId)]=segmentValue}});return segmentsTrackingData};segmenter.getSegmentValue=function(segmentId){return segmenter.visitorSegments[segmentId]};segmenter.reset=function(){segmenter.visitorSegments={}};segmenter.handleOfflineSegmentResponse=function(data){var segmentId;for(segmentId in data.map){log("Segmenter","Offline segment request returned: %s, %s",segmentId,data.map[segmentId]);segmenter.addToSegment(segmentId,data.map[segmentId])}};segmenter.removeFromSegment=function(segmentIdOrAPIName,saveChanges){var segmentId=data.getSegmentIdByIdentifier(segmentIdOrAPIName)||segmentIdOrAPIName;if(segmenter.visitorSegments[segmentId]){segmenter.visitorSegments[segmentId]=false;if(typeof saveChanges==="undefined"||saveChanges){segmenter.callChangeHandlers()}}else{timer.addEvent("Segmenter","Not removing "+segmentIdOrAPIName+", not found")}};segmenter.removeFromAllSegments=function(){var segmentIds=data.getSegmentIds();each(segmentIds,function(segmentId){segmenter.removeFromSegment(segmentId,false)});segmenter.callChangeHandlers()};segmenter.standardizeValue=function(segmentValue,maxLength){maxLength=maxLength||segmenter.MAX_VALUE_LENGTH;try{segmentValue=decodeURIComponent(segmentValue)}catch(e){}segmentValue=String(segmentValue).toLowerCase().substring(0,maxLength);return encodeURIComponent(segmentValue)};segmenter.tellPreviewAboutSegment=function(segmentId,addOrRemove){var addOrRemoveVerb=addOrRemove==="add"?"adding":"removing";var toOrFromPreposition=addOrRemove==="add"?"to":"from";var reason=preview.getReason(segmentId);if(reason){preview.addEvent("Not "+addOrRemoveVerb+" visitor "+toOrFromPreposition+" segment "+data.getSegmentName(segmentId)+" because "+reason+".",{type:"explanation"});preview.deleteReason(segmentId)}else{preview.addEvent("Segment "+addOrRemove+" condition matches, "+addOrRemoveVerb+toOrFromPreposition+" segment "+data.getSegmentName(segmentId),{type:"explanation"})}};segmenter.changeHandlers=[];segmenter.visitorSegments={};segmenter.MAX_VALUE_LENGTH=20;timer.addEvent=function(category,message,isVerbose){timer.eventQueue.push({date:new Date(),category:category,message:message,isVerbose:isVerbose||false});if(timer.shouldOutputImmediately){timer.flushLogs()}};timer.enableLogging=function(){directive.shouldLog=true};timer.enableVerboseLogging=function(){directive.shouldLog=true;directive.shouldLogVerbosely=true};timer.flushLogs=function(){if(directive.shouldLog){each(timer.eventQueue,function(event){if(!event.logged&&(!event.isVerbose||event.isVerbose===directive.shouldLogVerbosely)){var time=+event.date;var lastTimeDifference=timer.lastTime?time-timer.lastTime:0;var startTimeDifference=timer.startTime?time-timer.startTime:0;var timeString=" [time "+startTimeDifference+" +"+lastTimeDifference+"]";log(event.category,event.message+timeString);timer.lastTime=time;if(!timer.startTime){timer.startTime=time}event.logged=true}});timer.shouldOutputImmediately=true}};timer.lastTime=null;timer.startTime=null;timer.eventQueue=[];timer.shouldOutputImmediately=false;function appendArray(targetArray,sourceArray){targetArray.push.apply(targetArray,sourceArray)}function arrayContains(targetArray,key){for(var i=0;i<targetArray.length;i++){if(key==targetArray[i]){return true}}return false}function chooseWeightedIndex(weightArray){var nElements=weightArray.length;if(nElements===0){return null}if(nElements===1){return 0}var sumWeight=0;for(var i=0;i<nElements;i++){sumWeight+=weightArray[i]}var random=Math.random()*sumWeight;for(var i=0;i<nElements;i++){if(random<weightArray[i]){return i}random-=weightArray[i]}return getRandomNumber(nElements)}function containsString(string,substring){return string.indexOf(substring)!==-1}function containsRegEx(string,regEx){return Boolean(string.match(regEx))}function curry(function_,variableArguments){var boundArguments=slice(arguments,1);return function(){var arguments_=slice(arguments);prependArray(arguments_,boundArguments);return function_.apply(this,arguments_)}}function each(object,function_,context){var value=null;if(isArrayLike(object)){var length=object.length;for(var index=0;index<length;++index){value=function_.call(context,object[index],index);if(isDefined(value)){return value}}}else{for(var key in object){if(Object.prototype.hasOwnProperty.call(object,key)){value=function_.call(context,key,object[key]);if(isDefined(value)){return value}}}}return value}function extend(target,source){each(source,function(key,value){target[key]=value})}function filter(list,predicate){var filtered=[];for(var i=0,len=list.length;i<len;i++){var element=list[i];if(predicate(element)){filtered.push(element)}}return filtered}function format(pattern,variableArguments){var arguments_=arguments;var index=1;return pattern.replace(/%s/g,function(){return arguments_[index++]})}function getRandomNumber(maximum){return Math.floor(Math.random()*maximum)}function inArray(value,array){return each(array,function(item){if(item===value){return true}})||false}function isArrayLike(object){return object&&typeof object==="object"&&object.length&&typeof object.length==="number"}function isDefined(value){return typeof value!=="undefined"}function isNumberLike(object){return(typeof object==="number"||typeof object==="string")&&Number(object)==object}var keys=function(object){keys=(Object.keys)||function(object){var keys_=[];each(object,function(key){keys_.push(key)});return keys_};return keys.call(null,object)};var loadScript=function(scriptUrl){var head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;var script=document.createElement("script");script.src=scriptUrl;script.type="text/javascript";head.appendChild(script)};var log=function(category,message,variableArguments){var console=window.console;if(directive.shouldLog&&console&&console.log){var parameters=slice(arguments,1);parameters[0]="Optimizely / "+category+" / "+message;Function.prototype.apply.call(console.log,console,parameters)}};function prependArray(targetArray,sourceArray){targetArray.unshift.apply(targetArray,sourceArray)}function quote(string){return string.replace(/([\f\n\r\t\\'"])/g,"\\$1")}function slice(array,start,end){return Array.prototype.slice.call(array,start||0,end||array.length)}function trim(string){return string.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}optly.taint.createDeconstructingFunction=function(originalFunction){return function(object){var shouldDeconstruct=typeof object==="object"&&optly.taint.isObjectPrototypeTainted();if(!shouldDeconstruct){return originalFunction.apply(this,arguments)}else{var result=null;for(var key in object){if(object.hasOwnProperty(key)){result=originalFunction.call(this,key,object[key])}}return result}}};optly.taint.createCleanJQueryEach=function(originalFunction,$){return function(object,callback,args){var shouldClean=(object.length===undefined||$.isFunction(object))&&optly.taint.isObjectPrototypeTainted();if(!shouldClean){originalFunction.apply(this,arguments)}else{if(args){for(var name in object){if(object.hasOwnProperty(name)&&callback.apply(object[name],args)===false){break}}}else{for(var name in object){if(object.hasOwnProperty(name)&&!callback.call(object[name],name,object[name])===false){break}}}}return object}};optly.taint.createCleanJQueryInit=function(originalFunction,$){var callOriginalFunctionRaw=function(selector,context,rootJQuery){return new originalFunction(selector,context,rootJQuery)};var nativeGetElementsByClassName=optly.nativity.getNativeGetElementsByClassName();return function(selector,context,rootJQuery){var callOriginalFunction=callOriginalFunctionRaw;var currentGetByClass=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(currentGetByClass)&&nativeGetElementsByClassName){callOriginalFunction=function(selector,context,rootJQuery){document.getElementsByClassName=nativeGetElementsByClassName;var result=callOriginalFunctionRaw(selector,context,rootJQuery);document.getElementsByClassName=currentGetByClass;return result}}var shouldClean=typeof selector==="string"&&context&&$.type(context)==="object"&&optly.taint.isObjectPrototypeTainted();if(!shouldClean){return callOriginalFunction(selector,context,rootJQuery)}else{var result=callOriginalFunction(selector,undefined,rootJQuery);result.attr(context);return result}}};optly.taint.fixJQueryTaintIssues=function($){$.fn.attr=optly.taint.createDeconstructingFunction($.fn.attr);$.fn.css=optly.taint.createDeconstructingFunction($.fn.css);$.fn.extend=optly.taint.createDeconstructingFunction($.fn.extend);$.each=optly.taint.createCleanJQueryEach($.each,$);$.fn.init=optly.taint.createCleanJQueryInit($.fn.init,$)};optly.taint.isObjectPrototypeTainted=function(){for(var key in {}){return true}return false};optly.domain.check=function(url){var location=optly.domain.getLocation(url);for(var i=0,nRules=optly.domain.PATH_BLACK_LIST.length;i<nRules;i++){var pattern=optly.domain.PATH_BLACK_LIST[i];if(pattern.test(location.pathname)){return false}}for(i=0,nRules=optly.domain.HOST_BLACK_LIST.length;i<nRules;i++){pattern=optly.domain.HOST_BLACK_LIST[i];if(pattern.test(location.hostname)){return false}}var whiteList=new RegExp(optly.domain.WHITE_LIST);return whiteList.test(location.hostname)};optly.domain.getLocation=function(url){var anchor=document.createElement("a");anchor.href=url;return anchor};optly.domain.HOST_BLACK_LIST=[/(edit|preview)(-local)?(-hrd)?\.optimizely\.(com|test)/,/optimizelyedit(-hrd)?\.appspot\.com/,/cdn[^\.]*\.optimizely\.com/];optly.domain.PATH_BLACK_LIST=[/^\/api\/client/];optly.domain.WHITE_LIST="(www-devel.optimizely.com$)|(www-devel.optimizely.appspot.com$)|(www-devel-dot-optimizely.appspot.com$)|(.optimizely.com$)|(.optimizely.at$)|(.optimizely.be$)|(.optimizely.bg$)|(.optimizely.by$)|(.optimizely.ch$)|(.optimizely.cl$)|(.optimizely.co.il$)|(.optimizely.co.nz$)|(.optimizely.co.uk$)|(.optimizely.com.br$)|(.optimizely.com.hr$)|(.optimizely.com.mx$)|(.optimizely.cz$)|(.optimizely.de$)|(.optimizely.es$)|(.optimizely.dk$)|(.optimizely.fr$)|(.optimizely.gr$)|(.optimizely.hk$)|(.optimizely.ie$)|(.optimizely.it$)|(.optimizely.jp$)|(.optimizely.lt$)|(.optimizely.lu$)|(.optimizely.lv$)|(.optimizely.nl$)|(.optimizely.mx$)|(.optimizely.pl$)|(.optimizely.pt$)|(.optimizely.ro$)|(.optimizely.ru$)|(.optimizely.se$)|(.optimizely.sg$)|(.optimisely.com$)|(.optimisely.at$)|(.optimisely.be$)|(.optimisely.bg$)|(.optimisely.by$)|(.optimisely.ch$)|(.optimisely.cl$)|(.optimisely.co.il$)|(.optimisely.co.nz$)|(.optimisely.co.uk$)|(.optimisely.com.br$)|(.optimisely.com.hr$)|(.optimisely.com.mx$)|(.optimisely.cz$)|(.optimisely.de$)|(.optimisely.es$)|(.optimisely.dk$)|(.optimisely.fr$)|(.optimisely.gr$)|(.optimisely.hk$)|(.optimisely.ie$)|(.optimisely.it$)|(.optimisely.jp$)|(.optimisely.lt$)|(.optimisely.lu$)|(.optimisely.lv$)|(.optimisely.nl$)|(.optimisely.mx$)|(.optimisely.pl$)|(.optimisely.pt$)|(.optimisely.ro$)|(.optimisely.ru$)|(.optimisely.se$)|(.optimisely.sg$)|(.optimizely.test$)|(.optimizely.appspot.com$)|(.optimizely-hrd.appspot.com$)|(-dot-optimizely.appspot.com$)|(-dot-optimizely-hrd.appspot.com$)";plan.addChangeHandler=function(changeHandler){plan.changeHandlers.push(changeHandler)};plan.addVariation=function(variationId,source,shouldEvaluate,shouldReplace){shouldEvaluate=(shouldEvaluate===true);shouldReplace=(shouldReplace===true);var added=false;var experimentId=data.getVariationExperimentId(variationId);if(experimentId&&(shouldReplace||!plan.containsExperiment(experimentId))){added=true;if(shouldReplace&&plan.containsExperiment(experimentId)){for(var i=0;i<plan.variations.length;i++){if(plan.variations[i].experimentId===experimentId){plan.variations.splice(i,1)}}}plan.variations.push({experimentId:experimentId,id:variationId,source:source});if(shouldEvaluate){evaluator.enqueue(experimentId)}plan.variationExperimentIds[experimentId]=true;plan.callChangeHandlers();timer.addEvent("Plan","Added experiment "+experimentId+" and variation id "+variationId+" to the plan, source is "+source,true)}return added};plan.buildMultivariateId=function(experimentId,mapping){var variationIds=[];var sectionIds=data.getExperimentSectionIds(experimentId);for(var i=0;i<sectionIds.length;i++){var variationId=mapping[sectionIds[i]];if(variationId===IGNORED_VARIATION_ID){return""}variationIds.push(variationId)}return variationIds.join(VARIATION_ID_DELIMITER)};plan.containsExperiment=function(experimentId){return experimentId in plan.ignoredExperimentIds||experimentId in plan.variationExperimentIds};plan.filterUrlSpecificVariationCode=function(code){var lines=code.split(VARIATION_CODE_DELIMITER);var filteredLines=[];var lineEligibleForInclusion=true;for(var i=0,nLines=lines.length;i<nLines;i++){var line=$.trim(lines[i]);if(line===VARIATION_URL_END){lineEligibleForInclusion=true}else{if(line!==""){var matches=VARIATION_URL_START_RE.exec(line);if(matches&&matches.length===13){var includes=matches[2]?matches[2].split(VARIATION_URL_DELIMITER):[];var excludes=matches[4]?matches[4].split(VARIATION_URL_DELIMITER):[];var match_type=matches[6]?matches[6]:"substring";var include_types=matches[8]?matches[8].split(VARIATION_URL_DELIMITER):[];var exclude_types=matches[10]?matches[10].split(VARIATION_URL_DELIMITER):[];if(includes.length>0){var includeCondition=plan.zipConditions(includes,include_types,match_type);lineEligibleForInclusion=condition.testUrls(includeCondition)}if(lineEligibleForInclusion&&excludes.length>0){var excludeCondition=plan.zipConditions(excludes,exclude_types,match_type);lineEligibleForInclusion=!condition.testUrls(excludeCondition)}}else{if(lineEligibleForInclusion){filteredLines.push(line)}}}}}return filteredLines.join(VARIATION_CODE_DELIMITER)};plan.getProjectClickGoalWithCustomTargetingSteps=function(eventSteps){var goalData=data.getProjectClickGoalsWithCustomTargeting();for(var i=0,nGoals=goalData.length;i<nGoals;i++){var goalStep={eventName:goalData[i]["event_name"],selector:goalData[i]["selector"],type:"event '"+goalData[i]["event_name"]+"' (click goal)",waitUntilSelectorReady:true};if("revenue" in goalData[i]){goalStep.revenue=goalData[i]["revenue"]}eventSteps.push(goalStep)}};plan.getSteps=function(experimentIds){if(experimentIds===undefined){experimentIds=[]}else{if(isNumberLike(experimentIds)){experimentIds=[experimentIds]}}experimentIds=experimentIds;var variationIds=plan.getVariationIds(experimentIds);var eventSteps=[];var forcedSteps=[];var globalSteps=[];var safeSteps=[];plan.getProjectClickGoalWithCustomTargetingSteps(eventSteps);each(experimentIds,function(experimentId){plan.getExperimentSteps(experimentId,eventSteps,globalSteps,forcedSteps,safeSteps)});each(variationIds,function(variationId){plan.getVariationSteps(variationId,forcedSteps,safeSteps)});var steps=[];appendArray(steps,forcedSteps);appendArray(steps,globalSteps);appendArray(steps,safeSteps);appendArray(steps,eventSteps);return steps};plan.getVariationId=function(experimentId){var returnVariationId=null;each(plan.variations,function(variation){if(experimentId==variation.experimentId){returnVariationId=variation.id}});return returnVariationId};plan.getVariationIds=function(experimentIds){var variationIds=[];var shouldAcceptAnyExperiment=!isDefined(experimentIds);experimentIds=experimentIds||[];each(plan.variations,function(variation){if(shouldAcceptAnyExperiment||arrayContains(experimentIds,variation.experimentId)){variationIds.push(variation.id)}});return variationIds};plan.ignoreExperiment=function(experimentId,override){override=(override===true);if(override||!plan.containsExperiment(experimentId)){plan.ignoredExperimentIds[experimentId]=true;plan.callChangeHandlers()}};plan.isExperimentIgnored=function(experimentId){return experimentId in plan.ignoredExperimentIds};plan.removeExperiment=function(experimentId){if(plan.ignoredExperimentIds[experimentId]){delete plan.ignoredExperimentIds[experimentId]}if(plan.variationExperimentIds[experimentId]){delete plan.variationExperimentIds[experimentId]}for(var i=0;i<plan.variations.length;i++){if(plan.variations[i].experimentId===experimentId){plan.variations.splice(i,1)}}plan.callChangeHandlers()};plan.log=function(){if(directive.shouldLog){each(plan.ignoredExperimentIds,function(experimentId){var experimentName=data.getExperimentName(experimentId);timer.addEvent("Plan","Ignore experiment '"+experimentName+"' ("+experimentId+")")});each(plan.variations,function(variation,index){var experimentId=data.getVariationExperimentId(variation.id);var variationName=data.getVariationName(variation.id);timer.addEvent("Plan",data.getExperimentString(experimentId)+' in variation "'+variationName+'" ('+variation.id+")")})}};plan.readCookie=function(){var bucketMap=cookie.get(BUCKET_COOKIE_NAME);if(!bucketMap){return}try{bucketMap=(json.parse(bucketMap))}catch(e){bucketMap={}}var mvtExperiments={};each(bucketMap,function(experimentId,variationId){variationId=String(variationId);var masterExperimentId=data.getVariationExperimentId(variationId);var sectionIds=data.getExperimentSectionIds(masterExperimentId);if(sectionIds.length>1&&variationId.indexOf(VARIATION_ID_DELIMITER)===-1){mvtExperiments[masterExperimentId]=mvtExperiments[masterExperimentId]||{};mvtExperiments[masterExperimentId][experimentId]=variationId}else{if(variationId!==IGNORED_VARIATION_ID){var added=plan.addVariation(variationId,"cookie",false);if(!added){plan.foreignBucketMap[experimentId]=variationId}}else{plan.ignoreExperiment(experimentId)}}});each(mvtExperiments,function(parentExperimentId,mapping){var newId=plan.buildMultivariateId(parentExperimentId,mapping);if(newId.length>0){plan.addVariation(newId,"cookie",false)}else{plan.ignoreExperiment(parentExperimentId)}})};plan.writeCookie=function(){var bucketMap={};each(plan.foreignBucketMap,function(experimentId,variationId){bucketMap[experimentId]=variationId});each(plan.variations,function(variation){var experimentId=data.getVariationExperimentId(variation.id);bucketMap[experimentId]=variation.id});each(plan.ignoredExperimentIds,function(experimentId){bucketMap[experimentId]=IGNORED_VARIATION_ID});cookie.set(BUCKET_COOKIE_NAME,json.stringify(bucketMap),BUCKET_COOKIE_AGE)};plan.callChangeHandlers=function(){each(plan.changeHandlers,function(changeHandler){changeHandler()})};plan.getExperimentSteps=function(experimentId,eventSteps,globalSteps,forcedSteps,safeSteps){var selectors=data.getExperimentEvents(experimentId);each(selectors,function(selector,events){each(events,function(event){eventSteps.push({eventName:event.eventName,experimentIds:event.experimentIds,revenue:event.revenue,selector:selector,type:"event '"+event.eventName+"' (experiment "+experimentId+")",waitUntilSelectorReady:true})})});var css=data.getExperimentCss(experimentId);var code=data.getExperimentCode(experimentId);if(css){globalSteps.push({code:'$("body").append("<style>'+quote(css)+'</style>");',selector:"body",type:"global css (experiment "+experimentId+")",waitUntilSelectorReady:true})}if(code){plan.appendStepsFromCode(code,forcedSteps,safeSteps)}};plan.getVariationSteps=function(variationId,forcedSteps,safeSteps){var code=data.getVariationCode(variationId);code=plan.filterUrlSpecificVariationCode(code);plan.appendStepsFromCode(code,forcedSteps,safeSteps,variationId)};plan.appendStepsFromCode=function(code,forcedSteps,safeSteps,variationId){if(containsString(code,"_optimizely_redirect")){forcedSteps.push({code:code,type:"code forced (redirect)",variationId:variationId})}else{var codeLines=code.split("\n");var isEditorOnly=false;var immediate=false;var immediateCodeLines=[];var jQueryExpression=plan.jQueryExpression;var rearrangeExpression=plan.rearrangeExpression;var nonJQueryCodeLines=[];while(codeLines.length>0){var codeLine=trim(codeLines.shift());var containsInvalidJQuery=nonJQueryCodeLines.length>0;if(codeLine){if(containsRegEx(codeLine,/_optimizely_evaluate\s{0,9}=\s{0,9}force/i)){immediate=true;continue}else{if(containsRegEx(codeLine,/_optimizely_evaluate\s{0,9}=\s{0,9}safe/i)||containsRegEx(codeLine,/_optimizely_evaluate\s{0,9}=\s{0,9}end_force/i)){immediate=false;continue}else{if(containsRegEx(codeLine,/_optimizely_evaluate\s{0,9}=\s{0,9}editor_only/i)){isEditorOnly=true;continue}else{if(containsRegEx(codeLine,/_optimizely_evaluate\s{0,9}=\s{0,9}end_editor_only/i)){isEditorOnly=false;continue}else{if(plan.commentRegex.exec(codeLine)){continue}}}}}if(isEditorOnly){continue}if(immediate){immediateCodeLines.push(codeLine)}else{if(!containsInvalidJQuery){var jQueryMatch=jQueryExpression.exec(codeLine);var selectors=[];if(!jQueryMatch){containsInvalidJQuery=true}else{selectors.push(jQueryMatch[1]);var rearrangeMatch=rearrangeExpression.exec(codeLine);if(rearrangeMatch&&rearrangeMatch.length>4){selectors.push(rearrangeMatch[4])}safeSteps.push({code:codeLine,selector:selectors,type:"safe jquery",waitUntilSelectorReady:true,variationId:variationId})}}if(containsInvalidJQuery){nonJQueryCodeLines.push(codeLine)}}}}if(immediateCodeLines.length>0){forcedSteps.push({code:immediateCodeLines.join("\n"),type:"forced evaluation",variationId:variationId})}if(nonJQueryCodeLines.length>0){safeSteps.push({code:nonJQueryCodeLines.join("\n"),type:"safe non-jquery",waitUntilDocumentReady:true,variationId:variationId})}}};plan.zipConditions=function(urls,matches,defaultMatch){var conditions={values:[]};for(var i=0,nUrls=urls.length;i<nUrls;i++){conditions.values.push({value:urls[i],match:matches[i]||defaultMatch})}return conditions};plan.changeHandlers=[];plan.foreignBucketMap={};plan.ignoredExperimentIds={};plan.rearrangeExpression=/^\$j?\(['"](.+?)['"]\)\.detach\(\)\.(appendTo|insertAfter|insertBefore|prependTo)\(['"](.+?)['"]\);(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/;plan.commentRegex=/^(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/;plan.jQueryExpression=/^\$j?\(['"](.+?)['"]\)\..+;(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/;plan.variationExperimentIds={};plan.variations=[];main=function(){if(!TEST_MODULE){optly.taint.fixJQueryTaintIssues($)}timer.addEvent("Main","Started, revision "+data.getRevision());query.process();cookie.initialize();user.initialize();plan.readCookie();segmenter.initialize();api.initialize();iapi.initialize();main.log();if(directive.scriptToLoad){loadScript(directive.scriptToLoad)}if(directive.isEnabled){distributor.distributeAll();plan.writeCookie();tracker.enableEngagementTracking();if(!directive.shouldSkipPageTracking){if(directive.delayPageviewTracking>0){setTimeout(function(){tracker.addPageviewEvent(document.location.href)},directive.delayPageviewTracking)}else{tracker.addPageviewEvent(document.location.href)}}tracker.sendLogEvents();integrator.makeThirdPartyRequests()}plan.log();if(directive.isEditor){api.finalize()}else{if(directive.isEnabled){evaluator.evaluate();api.finalize();timer.flushLogs();if(!data.isInstallationVerified()){tracker.sendVerificationRequest()}}}preview.initialize();setTimeout(function(){window.optimizelyCode={}},0);setTimeout(function(){try{window.optimizely["iapi"]["geoTimedOut"]=!api.hasLocationDataArrived();window.optimizely["activateGeoDelayedExperiments"]=undefined}catch(error){}},2000);timer.addEvent("Main","End of main")};main.log=function(){timer.addEvent("Info","Is enabled: "+directive.isEnabled);timer.addEvent("Info","Script to load: "+(directive.scriptToLoad||"none"));timer.addEvent("Info","Browser type: "+user.getBrowserId());timer.addEvent("Info","Browser version: "+user.getBrowserVersion());var mobileBrowserType=user.getMobileId();if(mobileBrowserType!=="unknown"){timer.addEvent("Info","Mobile browser type: "+mobileBrowserType)}timer.addEvent("Info","New vs returning: "+user.getNewVsReturning());timer.addEvent("Info","Source type: "+user.getSourceType());timer.addEvent("Info","User ID: "+user.getId())};main();optly.Cleanse.finish()};optimizelyCode({log_host:"log.optimizely.com",goal_expressions:{"381160098":["^engagement$"]},api_host:"api.optimizely.com",version:"www-master-1237.371173510725388741",admin_account_id:199382811,www_host:"www.optimizely.com",project_id:381160097,segments:{"382310072":{name:"Mobile Visitors",segment_value_type:"mobile",api_name:"optimizely_mobile",id:382310072},"381740105":{name:"Campaign",segment_value_type:"campaign",api_name:"optimizely_campaign",id:381740105},"381100110":{name:"Browser",segment_value_type:"browser",api_name:"optimizely_browser",id:381100110},"382310071":{name:"Source Type",segment_value_type:"source_type",api_name:"optimizely_source_type",id:382310071}},revision:1});